 **PROGRAM NAME:
 **PROGRAM TITLE: 
  HP 2000F BASIC FOR DOS-M/DOS III
  
 **REVISION?  NO
  
 **PACKAGE: 99    **CATEGORY:  5    **SUBCATEGORY:  1 
  
 **KEYWORDS:
    BASIC 
  
  
 **LANGUAGES: 
    ASMB
  
 **COMPUTER TYPE: 
  
  
 **OPERATING SYSTEMS: 
    DOS-M     DOS III 
  
 **MEMORY REQUIREMENTS: 
  24K 
  
 **DEPENDENT ON SYSTEM SOFTWARE?  YES 
 **DEPENDENT ON SYSTEM HARDWARE?  YES 
  
  
 **ABSTRACT:
  
  DOS-M/DOS III BASIC IS ESSENTIALLY A SINGLE TERMINAL VERSION OF HP 2000F
  TIME-SHARED BASIC.  IT RUNS UNDER THE DOS-M OR DOS III OPERATING SYSTEM,
  GIVING THE USERS OF THESE SYSTEMS A POWERFUL, YET EASY TO USE COMPUTING 
  FACILITY.  FEATURES OF DOS-M/DOS III BASIC NOT FOUND IN OTHER DOS-M 
  BASIC'S INCLUDE:  STRING VARIABLES, FORMATTED OUTPUT, USER PROGRAM DISC 
  STORAGE AND RETRIEVAL, USER DATA FILES, PROGRAM CHAINING, ERROR MESSAGES
  INSTEAD OF ERROR NUMBERS, LINE PRINTER SUPPORT, BETTER PROGRAM EDITING
  FACILITIES, HIGH-SPEED PAPER TAPE INPUT AND OUTPUT OF PROGRAMS, MIN AND 
  MAX OPERATORS, MORE FLEXIBLE INPUT WITH ENTER STATEMENT, MULTI-BRANCH 
  GOTO AND GOSUB STATEMENTS, ADDITIONAL FUNCTIONS, SOURCE INPUT FROM ANY
  INPUT DEVICE VIA "LOAD" COMMAND, ETC. 
  
  ANOTHER IMPORTANT CONSIDERATION IS THE PROVISION FOR RETRIEVING BASIC 
  PROGRAMS FROM 2000F TIME-SHARED SYSTEM DUMP TAPES.  THIS GIVES THE DOS-M
  /DOS III USER ACCESS TO THE GREAT NUMBER OF USEFUL HP BASIC LIBRARY 
  PROGRAMS AND ALLOWS EASY TRANSFER OF OTHER USER-DEVELOPED PROGRAMS FROM 
  A TIME-SHARED SYSTEM TO A DOS ENVIRONMENT.  USER DATA FILES MAY ALSO
  BE TRANSFERRED FROM SYSTEM TO SYSTEM.  TO MAKE THESE CONVERSIONS THE
  DOS-M/2000C TSB FILE HANDLER, HP 24228, MUST BE USED IN CONJUNCTION 
  WITH SPECIAL ROUTINES INCLUDED IN THIS PACKAGE. 
  
  CURRENTLY, DOS-M/DOS III BASIC REQUIRES AT LEAST 14K WORDS OF MEMORY
  IN ADDITION TO SYSTEM REQUIREMENTS.  THEREFORE, A CPU WITH AT LEAST 
  24K WILL BE NECESSARY.  (A 32K CPU GIVES THE USER MORE PROGRAM SPACE
  THAN IS AVAILABLE ON THE 2000F.)
  
  A TIME BASE GENERATOR IS NECESSARY IF THE TIME COMMAND, TIM( ) FUNCTION,
  OR TIMED ENTER WILL BE USED.
  
  SEE "2000F: A GUIDE TO TIME-SHARED BASIC", HP ORDER NUMBER 02000-90044
  FOR DETAILED INFORMATION ABOUT THE LANGUAGE AND PROGRAM EXECUTION.
  
  
 **FILES IDENTIFICATION:
   (NOTE: FILES IN THIS CONTRIBUTION HAVE THE SAME NAME AS THE
     DOCUMENTATION FILE WITH THE LAST 2 DIGITS INCREMENTED. 
     E.G.: A00101, A00102, A00103, ETC.)
  
  FILE#  1: DOCUMENTATION FILE
  FILE#  2: SOURCE
  FILE#  3: SOURCE(CONTINUED) 
  FILE#  4: SOURCE(CONTINUED) 
  FILE#  5: SOURCE
  
  
 **LOAD INSTRUCTIONS: 
  
  
  
  
 **RUN INSTRUCTIONS:
  
  
  
  
 **INPUT/OUTPUT EXAMPLES: 
  
  
  
  
 **PROGRAM DESCRIPTION: 
  
  AN ATTEMPT HAS BEEN MADE TO DUPLICATE 2000F TIME-SHARED BASIC AS
  CLOSELY AS POSSIBLE.  THEREFORE, THE USER IS REFERRED TO "2000F:  A 
  GUIDE TO TIME-SHARED BASIC" (HP ORDER NUMBER 02000-90044) FOR DETAILED
  INFORMATION ABOUT THE LANGUAGE AND PROGRAM EXECUTION.  ONLY DIFFERENCES 
  BETWEEN 2000F AND DOS-M/DOS III BASIC WILL BE NOTED HERE. 
  
  TO RUN DOS-M/DOS III BASIC WITH THE SYSTEM CONSOLE AS THE USER TERMINAL 
  TYPE: 
            :PR,BASIC 
  
  TO RUN WITH ANOTHER CONSOLE AS THE USER TERMINAL TYPE:
  
            :PR,BASIC,(LU # OF CONSOLE) 
  
  IN EITHER CASE, BASIC RESPONDS WITH "READY", AND THE USER MAY TYPE
  PROGRAM STATEMENTS AND COMMANDS AS DESCRIBED IN "2000F: A GUIDE TO
  TIME-SHARED BASIC" WITH THE FOLLOWING EXCEPTIONS: 
  
       1.  THE "LOG IN" PROCEDURE IS NOT USED.
  
       2.  THE "BREAK" KEY IS NOT USED WITH DOS-M/DOS III BASIC.  TO STOP 
           A LISTING, RUNNING PROGRAM, OR OTHER LENGTHY OPERATION, SET
           BIT 15 OF THE SWITCH REGISTER ON.  THIS WILL TERMINATE THE 
           CURRENT OPERATION (EXCEPT FOR A RUNNING PROGRAM IF THE "BRK( )"
           FUNCTION HAS DISABLED "BREAK").
  
       3.  THE "ECHO" COMMAND IS NOT USED.
  
       4.  THE "PUNCH" AND "XPUNCH" COMMANDS PUNCH THE CURRENT PROGRAM ON 
           THE PAPER TAPE PUNCH (MUST BE LU #4).
  
       5.  THE "TAPE" COMMAND READS A PROGRAM TAPE FROM THE PHOTO-READER
           (MUST BE LU # 5).  IT EXPECTS A SPECIAL CHARACTER, CNTL-Z
           (Z TYPED WHILE HOLDING DOWN THE CNTL KEY), AT THE END OF THE 
           TAPE.  "PUNCH" AND "XPUNCH" PROVIDE THIS TERMINAL CHARACTER
           AUTOMATICALLY.  A TAPE PUNCHED ON A 2000 TIME-SHARED SYSTEM
           SHOULD HAVE THIS CHARACTER PUNCHED AFTER THE TRAILER AND 
           ANOTHER TRAILER PRODUCED FOLLOWING IT BEFORE THE TAPE IS 
           REMOVED FROM THE TERMINAL. 
  
       6.  NO MESSAGES ARE ISSUED ON THE STATUS OF THE LINE PRINTER 
           EXCEPT "LP FREE" WHEN A LISTING OR PROGRAM COMPLETES.
  
       7.  THE "TIME" COMMAND WORKS ONLY IF A TIME-BASE GENERATOR IS IN 
           THE SYSTEM.
  
       8.  THE "MESSAGE" COMMAND IS NOT USED. 
  
       9.  THERE IS NO DISTINCTION BETWEEN USER LIBRARY, GROUP LIBRARY, 
           AND SYSTEM LIBRARY.  ALL PROGRAM AND DATA FILES ARE USER 
           LIBRARY FILES.  THE "LIBRARY" AND "GROUP" COMMANDS ARE NOT 
           USED.
  
      10.  FOR THE "TIM( )" FUNCTION TO WORK PROPERLY, TWO THINGS ARE 
           REQUIRED.
  
           A.  A TIME-BASE GENERATOR MUST BE IN THE SYSTEM IF HOURS AND 
               MINUTES ARE DESIRED. 
  
           B.  A SPECIALLY FORMATTED ":DATE" DIRECTIVE MUST BE GIVEN TO 
               THE DOS-M OR DOS III SYSTEM IF THE DAY AND YEAR ARE
               DESIRED. 
  
               :DA,XXX/YY,M,N 
  
               WHERE XXX IS A THREE-DIGIT NUMBER GIVING THE CURRENT DAY 
               OF THE YEAR, AND YY IS THE YEAR OF THE CENTURY.  M IS THE
               CURRENT HOUR AND N THE CURRENT MINUTE OF THE DAY.
  
               :DA032/73,9,30 FOR FEB. 1, 1973 AT 9:30 AM 
  
      11.  CURRENTLY A MAXIMUM OF 31 PROGRAMS AND DATA FILES ALLOWED. 
  
      12.  A CNTL-L (L TYPED WHILE HOLDING DOWN THE CNTL KEY) IN AN OUTPUT
           STRING CAUSES A PAGE EJECT WHEN IT IS PRINTED ON THE LINE- 
           PRINTER. 
  
      13.  A NEW COMMAND, "LOAD-8", ALLOWS SOURCE STATEMENTS TO BE INPUT
           FROM A DEVICE OTHER THAN THE TTY.  FOR EXAMPLE, "LOAD-8" WOULD 
           INPUT SOURCE FROM LU #8.  "LOAD" ALONE DEFAULTS TO LU#5. 
           LOADING STOPS WHEN AN END-OF-FILE OR VALID COMMAND IS
           ENCOUNTERED IN THE SOURCE STREAM.
  
  BFILE 
  
  BFILE INITIALIZES A DOS-M OR DOS III FILE FOR USE BY BASIC.  THE USER 
  MUST RESERVE SPACE ON THE DISC FOR THIS FILE BY CREATING A FILE WITH THE
  ":ST,B,$FILS,N" DIRECTIVE.  ("$FILES" MUST BE ON THE SAME DISC SUB- 
  CHANNEL AS BASIC AND ITS SEGMENTS, BFILE, AND CFILE).  N IS THE NUMBER
  OF SECTORS THAT THE USER WISHES TO RESERVE FOR BASIC PROGRAM AND DATA 
  FILE STORAGE.  THE FILE IS THEN INITIALIZED BY RUNNING BFILE: 
  
       :PR,BFILE
  
  THIS BUILDS AN EMPTY DIRECTORY IN THE FIRST TWO SECTORS OF "$FILS". 
  (TWO SECTORS OF DIRECTORY ALLOW SPACE FOR UP TO 31 PROGRAMS OR DATA 
  FILE ENTRIES.)
  
  BFILE ISSUES AN ERROR MESSAGE IF A FILE NAMED "$FILS" DOES NOT EXIST
  OR IF IT IS LESS THAN THREE SECTORS LONG.  IF BFILE IS RUN AND IT FINDS 
  A DIRECTORY ALREADY IN "$FILS", IT ASKS "OK TO PURGE BASIC FILES?" AND
  WAITS FOR A RESPONSE FROM THE USER.  A RESPONSE OF "Y" INFORMS BFILE
  THAT IS SHOULD DESTROY THE OLD DIRECTORY AND CREATE A NEW ONE.  A 
  RESPONSE OF "N" TERMINATES BFILE WITHOUT FURTHER ACTION.
  
  CFILE 
  
  CFILE, USED IN CONJUNCTION WITH THE DOS-M/2000C FILE HANDLER, GIVES THE 
  USER THE CAPABILITY OF TRANSFERRING PROGRAMS AND DATA FILES BETWEEN A 
  2000C/F TSB SYSTEM AND A DOS-/DOS III SYSTEM.  THE FILE HANDLER CONVERTS
  PROGRAM AND DATA FILES FROM 2000C/F DUMP TAPES TO DOS-M/DOS III DISC
  FILES.  IT ALSO TRANSFERS PROPERLY FORMATTED DOS-M/DOS III DATA FILES 
  TO MAGNETIC TAPE FOR SUBSEQUENT LOADING ON A 2000C/F TSB SYSTEM.  CFILE 
  CONVERTS THE DOS-M/DOS III FILES CREATED BY THE FILE HANDLER TO BASIC 
  FILES WITHIN "$FILS".  CFILE ALSO CONVERTS BASIC FILES WITHIN "$FILS" 
  TO DOS-M/DOS III FILES THAT ARE FORMATTED FOR THE TSB FILE HANDLER. 
  
  CFILE IS RUN BY TYPING: 
  
       :PR,CFILE
  
  CHECK IS FIRST MADE TO SEE THAT A FILE NAMED "$FILS" EXISTS AND HAS 
  BEEN INITIALIZED BY BFILE.  IF NOT, AN ERROR MESSAGE IS PRINTED AND 
  CFILE TERMINATES.  IF "$FILS" IS READY, CFILE REQUESTS WHICH OPTION 
  IS DESIRED: 
  
       SELECT OPTION: 
  
         1 = DOS FILE TO BASIC
         2 = BASIC FILE TO DOS
  
  THE USER RESPONDS WITH "1" OR "2", FOLLOWED BY CARRIAGE RETURN, LINE- 
  FEED.  IF A RESPONSE OTHER THAN "1" OR "2" IS GIVEN, CFILE REPEATS THE
  OPTION REQUEST. 
  
  IF OPTION "1" IS SELECTED:
  
       CFILE TYPES "FILENAME?" AND WAITS FOR THE USER TO TYPE THE NAME
       OF THE DOS FILE THAT IS TO BE CONVERTED TO A BASIC FILE WITHIN 
       "$FILS".  THE USER TYPES THE FILENAME OR "/E".  "/E" TERMINATES
       CFILE.  IF A FILENAME IS TYPED, CFILE CHECKS TO SEE THAT IT EXISTS.
       ITS SIZE IS CHECKED AND THE DIRECTORY IN "$FILS" IS EXAMINED TO SEE
       IF THERE IS SPACE FOR ANOTHER ENTRY.  IF SO, AN ENTRY IS BUILT FOR 
       THE NAMED FILE AND IT IS COPIED TO "$FILS".  OTHERWISE, AN ERROR 
       MESSAGE IS PRINTED AND CFILE TERMINATES.  AFTER A SUCCESSFUL FILE
       COPY, CFILE REPEATS THE QUESTION "FILENAME?" AND THE PROCESS 
       CONTINUES AS ABOVE.
  
  IF OPTION "2" IS SELECTED:
  
       BEFORE RUNNING CFILE, THE USER SHOULD CREATE AN ASCII DOS DATA 
       FILE LARGE ENOUGH TO HOLD THE BASIC DATA FILE TO BE CONVERTED. 
       TO CALCULATE THE NUMBER OF SECTORS NEEDED, DOUBLE THE NUMBER OF
       RECORDS IN THE BASIC FILE AND ADD ONE.  (E.G. IF THE BASIC FILE
       HAS 5 RECORDS, :ST,A,FILENAME,11) THE NAME OF THE DOS FILE MUST BE 
       THE SAME AS THE FIRST FIVE CHARACTERS OF THE BASIC FILENAME. 
  
       CFILE TYPES "FLENAME?" AND WAITS FOR THE USER TO TYPE THE NAME OF
       THE BASIC FILE THAT IS TO BE CONVERTED TO A DOS FILE.  THE USER
       TYPES A FILENAME OR "/E".  "/E" TERMINATES CFILE.  IF A FILENAME 
       IS TYPED, CFILE CHECKS TO SEE THAT IT EXISTS WITHIN "$FILS", THAT
       IT IS NOT A PROGRAM FILE, AND THAT A DOS FILE OF THE APPROPRIATE 
       NAME AND SIZE ALSO EXISTS.  ERROR MESSAGES ARE PRINTED IF ANY OF 
       THESE CONDITIONS ARE NOT MET AND CFILE TERMINATES.  IF ALL IS WELL,
       CFILE PRINTS "ENTER USER ID" AND WAITS FOR THE USER'S RESPONSE.
       THE USER MUST ENTER THE TSB USER ID INTO WHICH HE WANTS THE FILE 
       TO BE TRANSFERRED.  THE FILE IS THEN CONVERTED TO A DOS FILE AND 
       FORMATTED FOR THE FILE HANDLER.  THEN THE QUESTION "FILENAME?" IS
       REPEATED AND PROCESSING CONTINUES AS DESCRIBED ABOVE.
  
  
   TO USE BASIC:
  
  1.  LOAD BASIC AS DESCRIBED IN OPERATING PROCEDURES BELOW.
  
  2.  RUN BASIC:
                     :PR,BASIC
  
  3.  AFTER "READY" IS PRINTED, TYPE YOUR PROGRAM.
  
  4.  TYPE "RUN". 
  
  5.  TYPE:          BYE
  
  6.  BASIC WILL TERMINATE WITH THE FOLLOWING MESSAGE:
  
           XXX MINUTES OF TERMINAL TIME  WHERE XXX IS THE NUMBER OF WHOLE 
                                         MINUTES THAT BASIC HAS BEEN
                                         RUNNING OR "000" IF NO TIME-BASE 
                                         GENERATOR IS IN THE SYSTEM.
  
  
 **ADDITIONAL EXITS OR DIAGNOSTIC MESSAGES: 
  
  ERROR MESSAGES ARE CONTAINED IN THE REFERENCES LISTED IN THE SECTION
  ON LITERATURE REFERENCE UNDER "MISCELLANEOUS".
  
  IF A COMMAND IS GIVEN TO DOS-M/DOS III BASIC THAT REQUIRES DISC STORAGE,
  A CHECK IS MADE TO SEE THAT A DOS FILE NAMED "$FILS" EXISTS AND HAS BEEN
  INITIALIZED WITH BFILE.  IF NOT, THE MESSAGE "$FILS NOT INITIALIZED"
  IS PRINTED. 
  
  
 **MISCELLANEOUS: 
  
  "CSAVE"'D PROGRAMS MAY NOT BE TRANSFERRED FROM A 2000 SYSTEM TO DOS-M/
  DOS III BASIC.
  
  VDR00 (MP 20985) MUST BE USED AS THE TELETYPE DRIVER, NOT DVR05.
  
  (BASIC REQUIRES THE "BINARY" I/O CAPABILITIES OF DVR00, WHICH ARE NOT 
  INCLUDED IN DVR05.)  BASIC (AND ITS SEGMENTS), BFILE, CFILE, AND $FILS
  MUST ALL RESIDE ON THE SAME DISC SUBCHANNEL.
  
  NOTE:SOME VERSIONS OF THE STANDARD DOS III RELOCATING LOADER WILL NOT 
       LOAD BASIC PROPERLY, EVEN THOUGH THEY SUPPORT CURRENT PAGE LINKING.
       USE THE LOADER INCLUDED IN THIS PACKAGE IF YOU HAVE BASE PAGE OVER-
       FLOW PROBLEMS. 
  
  LITERATURE REFERENCE: 
  
    2000F: A GUIDE TO TIME-SHARED BASIC, HP 02000-90044 
    DOS-M/2000C TSB FILE HANDLER, HP SMALL PROGRAMS MANUAL 5951-1381
