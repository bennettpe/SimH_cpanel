
    I. IDENTIFICATION - SAS 0044   REV. 4   9/15/71
    -----------------
 
    II. LANGUAGE - ASSEMBLY LANGUAGE, ABSOLUTE 
    ------------ 
 
    III. TYPE - BASIC CALLABLE SUBROUTINE
    ---------
 
    IV. LENGTH - 204 (DECIMAL) WORDS - WITHOUT DMA 
    ----------   216 (DECIMAL) WORDS - WITH DMA
 
    V. SPECIAL HARDWARE REQUIRED - 
    ---------------------------- 
 
       A. HP-2331A X-Y DISPLAY SUBSYSTEM CONSISTING OF:
          1. HP-1300A X-Y DISPLAY
          2. HP-12555A DUAL D/A CONVERTER INTERFACE CARD 
 
    VI. DESCRIPTION -
    ---------------
 
    IN ORDER TO UTILIZE THE X-Y DISPLAY SUBSYSTEM DRIVER, IT 
    MUST FIRST BE CALLED TO SET UP THE PLOT BUFFER, IN WHICH 
    CASE, IT WILL PROCESS THE BUFFER ADDRESS AND LENGTH AND
    SAVE THEM FOR USE BY THE INTERRUPT SERVICE ROUTINE. THE
    DRIVER THEN RETURNS TO THE CALLING PROGRAM.
 
    ONCE THE PLOT BUFFER HAS BEEN SET UP,THE DRIVER MAY THEN 
    BE CALLED TO ENTER POINTS TO BE DISPLAYED. IN THIS CASE, 
    IT WILL PROCESS THE X AND Y VALUES, DETERMINING IF THEY
    ARE IN THE CORRECT RANGE AND MERGING THEM INTO A SINGLE
    WORD.IT WILL THEN STORE THIS WORD IN THE PLOT BUFFER AND 
    RETURN TO THE CALLING PROGRAM. IN THE EVENT THAT EITHER
    THE X OR Y VALUE IS OUTSIDE THE PROPER RANGE, THE DRIVER 
    RETURNS TO THE CALLING PROGRAM WITHOUT STORING THE POINT 
    IN THE PLOT BUFFER.
      HED HP-2331A X-Y DISPLAY SUBSYSTEM DRIVER - SAS 0044
 
 
     VI. DESCRIPTION - CONT'D 
     -------------- 
 
     WHEN THE DRIVER IS CALLED TO DISPLAY A SET OF X-Y AXIS,
     IT WILL FIRST DETERMINE IF THE PLOT BUFFER HAS BEEN SET
     UP. IF IT HAS, IT WILL THEN PROCESS THE X AND Y POSITION 
     VALUES, DETERMINING A SET OF CORRESPONDING CONSTANTS AND 
     SAVING THEM FOR USE BY THE INTERRUPT SERVICE ROUTINE. IT 
     WILL THEN RETURN TO THE CALLING PROGRAM.IF THE DRIVER IS 
     CALLED TO DISPLAY THE AXIS BEFORE THE PLOT BUFFER IS SET 
     UP, IT WILL IGNORE THE REQUEST AND RETURN IMMEDIATELY TO 
     THE CALLING PROGRAM. 
 
     THE DRIVER MAY ALSO BE CALLED TO CLEAR THE PLOT BUFFER,
     IN WHICH CASE,IT WILL FIRST DETERMINE IF THE PLOT BUFFER 
     HAS BEEN SET UP. IF IT HAS, THE DRIVER THEN CLEARS IT BY 
     SETTING EACH LOCATION TO A 0 AND IT WILL THEN RETURN TO
     THE CALLING PROGRAM.IF THE DRIVER IS CALLED TO CLEAR THE 
     PLOT BUFFER BEFORE IT HAS BEEN SET UP,IT WILL IGNORE THE 
     REQUEST AND RETURN IMMEDIATELY TO THE CALLING PROGRAM. 
 
     THE KEY SEGMENT OF THIS DRIVER IS THE INTERRUPT SERVICE
     SUBROUTINE,WHICH IS EXECUTED EACH TIME THE D/A CONVERTER 
     INTERRUPTS (ABOUT EVERY TWENTY MILLISECONDS). WHEN THIS
     INTERRUPT OCCURS, THIS SUBROUTINE WILL FIRST DISPLAY THE 
     X AND Y AXIS, IF THIS OPTION WAS REQUESTED. NEXT,IT WILL 
     DISPLAY THE CONTENTS OF THE PLOT BUFFER, INITIALIZE THE
     D/A CONVERTER AND RETURN TO THE PROGRAM IN PROGRESS. 
 
     VII. ENTRY POINTS - PLOTB, GRAPH, ERASE, DISPT, INTER
     -----------------
 
     VIII. EXTERNAL SUBROUTINES - IFIX
     -------------------------- 
 
     IX. CALLING INFORMATION -
     -----------------------
 
     TO SET UP THE PLOT BUFFER, THE DRIVER IS CALLED FROM 
     BASIC AS:
 
        CALL (1, A(1), N) 
 
           WHERE        A - AN ARRAY USED TO STORE THE
                            POINTS TO BE DISPLAYED. 
 
                        N - A VARIABLE OR CONSTANT WHICH
                            SPECIFIES THE NO. OF POINTS 
                            TO BE DISPLAYED.
 
     IX. CALLING INFORMATION - CONT'D 
     -----------------------
 
     TO TURN THE X-Y DISPLAY OFF, THE DRIVER IS CALLED FROM 
     BASIC AS:
 
        CALL (1, A(1), 0) 
 
     TO STORE A POINT IN THE PLOT BUFFER, THE DRIVER IS 
     CALLED FROM BASIC AS:
 
        CALL (2, X, Y)
 
           WHERE        X - A VARIABLE OR CONSTANT, IN
                            THE RANGE 1 TO 255, WHICH 
                            REPRESENTS THE X-COORDINATE 
                            VALUE.
 
                        Y - A VARIABLE OR CONSTANT, IN
                            THE RANGE 1 TO 255, WHICH 
                            REPRESENTS THE Y-COORDINATE 
                            VALUE.
 
     TO DISPLAY A SET OF X AND Y AXIS, THE DRIVER IS CALLED 
     FROM BASIC AS: 
 
        CALL (3, H, V)
 
           WHERE        H - A VARIABLE OR CONSTANT WHICH
                            SPECIFIES THE POSITION OF THE 
                            X-AXIS, AS SHOWN BELOW- 
 
                                 NO.    POSITION
                                 ---    --------
 
                                  0     BOTTOM
                                  1     CENTER
                                  2     TOP 
 
                        V - A VARIABLE OR CONSTANT WHICH
                            SPECIFIES THE POSITION OF THE 
                            Y-AXIS, AS SHOWN BELOW- 
 
                                 NO.    POSITION
                                 ---    --------
 
                                  0     LEFT
                                  1     CENTER
                                  2     RIGHT 
 
     IX. CALLING INFORMATION - CONT'D 
     -----------------------
 
     TO TERMINATE DISPLAY OF THE AXIS, THE DRIVER IS CALLED 
     FROM BASIC AS: 
 
        CALL (3, -1, 0) 
 
     TO CLEAR THE PLOT BUFFER, THE DRIVER IS CALLED FROM
     BASIC AS:
 
        CALL (4)
 
 
     X. PROGRAMMING NOTES - 
     -------------------- 
 
        1. THIS PROGRAM SHOULD BE USED ONLY IN CONJUNCTION
           WITH THE HP-24000A BASIC COMPILER. USE WITH ANY
           OTHER VERSION OF THE BASIC COMPILER WILL RESULT
           IN UNSUCCESSFUL PROGRAM EXECUTION. 
 
        2. TO OVERLAY THE MATRIX OPERATIONS OF THE COMPILER 
           WITH THIS PROGRAM, THE N OPTION MUST BE SPECIFIED
           IN THE CONTORL STATEMENT DURING ASSEMBLY.
 
        3. TO DISPLAY THE CONTENTS OF THE PLOT BUFFER USING 
           DIRECT MEMORY ACCESS,THE Z OPTION MUST BE INCLUDED 
           IN THE CONTROL STATEMENT DURING ASSEMBLY.
 
        4. TO CONFIGURE THIS PROGRAM FOR USE WITH DIFFERENT 
           I/O CHANNELS, FOLLOW THE PROCEDURE BELOW-
 
              A. LOAD THE BASIC COMPILER, USING THE BBL.
 
              B. LOAD THE X-Y DISPLAY SUBSYSTEM DRIVER, 
                 USING THE BBL. 
 
              C. LOAD ADDRESS TO 77B. 
 
              D. LOAD THE SWITCH REGISTER WITH THE SELECT 
                 CODE OF THE D/A CONVERTER INTERFACE CARD.
 
              E. PRESS PRESET.
 
              F. PRESS RUN. 
 
           THE COMPUTER WILL NOW HALT WITH A 102077 IN THE
           T-REGISTER AND THE DRIVER IS READY FOR USE.
 
