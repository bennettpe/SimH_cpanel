IMSK0  000135 
IMSK1  000136 
IMSK2  000137 
IMSK3  000140 
IMSK4  000141 
IMSK5  000142 
IMSK6  000143 
IMSK9  000144 
STST0  000147 
PROG1  000206 
IWD11  000210 
PROG2  000352 
PROG3  000413 
PROG4  000415 
PROG5  000417 
PROG6  000421 
PTOUT  000424 
RSTAT  000453 
IWD21  000454 
IWD22  000456 
TEST1  000460 
TEST2  000474 
TEST3  000511 
TEST4  000525 
TEST5  000541 
TEST6  000566 
TEST7  000613 
I9999  000640 
I9500  000641 
I9334  000642 
I8600  000643 
I7600  000644 
I5100  000645 
I5000  000646 
I4000  000647 
I1111  000650 
I1000  000651 
I0667  000652 
I0500  000653 
I0200  000654 
I0100  000655 
M0015  000656 
M0040  000657 
M0100  000660 
M1000  000661 
M1111  000662 
M4000  000663 
M5000  000664 
TORG1  000665 
TORG2  000705 
TORG3  000756 
TORG4  001027 
TORG5  001100 
CNTR1  001151 
PNTR1  001152 
BUF10  001153 
BUF11  001157 
BPLOT  001232 
IWD81  001237 
IWD82  001241 
WDOUT  001274 
IWD83  001275 
IWD84  001277 
IWD85  001300 
IPLOT  001302 
HOLDF  001303 
NEXTP  001316 
IWD92  001353 
EXIT1  001357 
IWD93  001360 
IWD94  001361 
EXIT2  001362 
INTRY  001365 
BUFAD  001371 
BUFLN  001372 
PNTST  001373 
WORD4  001374 
SAVEA  001375 
SAVEB  001376 
PENUP  001377 
PENDN  001400 
MASK1  001401 
MASK2  001402 
RWORD  001403 
RSSOC  001404 
                ASMB,A,B,L,T
ERROR: No instruction on line
ERROR: Missing End-of-line
* 
* 
***********  HP 7210 PLOTTER DIAGNOSTIC AND TEST  *********** 
* 
* 
*            BINARY TAPE     PART NO. 72002-60001 
*            SOURCE TAPE 1   PART NO. 72002-80001 
*            LISTING         PART NO. 72002-90001 
* 
* THIS IS AN ABSOLUTE ASSEMBLY LANGUAGE PROGRAM REQUIRING ONLY AN 
* INTERFACED PLOTTER AND ASSOCIATED COMPUTER FOR ITS OPERATION
* 
* INSTRUCTIONS FOR USING THIS PROGRAM ARE CONTAINED IN SECTION IV 
* OF THE OPERATING AND SERVICE MANUAL FOR THE HP17210A INTERFACE KIT
* PART NO. 17210-90000
* 
* 
  00077               ORG 77B 
* 
* THE FOLLOWING INSTRUCTION TRANSFERS CONTROL TO THE RESTART ROUTINE
* 
  00077 024145        JMP STST0-2        RESTART ENTRY POINT
* 
* THIS SECTION SETS THE SELECT CODES AND THE INTERRUPT ADDRESS
* 
  00100 102501        LIA 1B             GET SELECT CODE FROM SWITCHES
  00101 010135        AND IMSK0          ISOLATE SELECT CODE
  00102 070001        STA 1B             B=SELECT CODE
  00103 060136        LDA IMSK1          A=SFS OP CODE
  00104 030001        IOR 1B             INSERT SELECT CODE 
  00105 070454        STA IWD21          SET SFS INSTRUCTION
  00106 071237        STA IWD81 
  00107 071275        STA IWD83 
  00110 060137        LDA IMSK2          A=LIA OP CODE
  00111 030001        IOR 1B             INSERT SELECT CODE 
  00112 070456        STA IWD22 
  00113 071241        STA IWD82          SET LIA INSTRUCTION
  00114 020140        XOR IMSK3          CHANGE TO LIB OP CODE
  00115 071316        STA NEXTP          SET LIB INSTRUCTION
  00116 060141        LDA IMSK4          A=OTA OP CODE
  00117 030001        IOR 1B             INSERT SELECT CODE 
  00120 071277        STA IWD84          SET OTA INSTRUCTIONS 
  00121 071360        STA IWD93 
  00122 060142        LDA IMSK5          A=STC UU,C OP CODE 
  00123 030001        IOR 1B             INSERT SELECT CODE 
  00124 071300        STA IWD85          SET STC UU,C INSTRUCTIONS
  00125 071361        STA IWD94 
  00126 060143        LDA IMSK6          A=CLC OP CODE
  00127 030001        IOR 1B             INSERT SELECT CODE 
  00130 070210        STA IWD11          SET CLC INSTRUCTIONS 
  00131 071353        STA IWD92 
  00132 060144        LDA IMSK9          A=JSB INTRY
  00133 170001        STA 1B,I           SET INTERRUPT LINKAGE
  00134 024147        JMP STST0 
  00135 000077  IMSK0 OCT 000077
  00136 102300  IMSK1 SFS *-* 
  00137 102500  IMSK2 LIA *-* 
  00140 004000  IMSK3 OCT 004000         CHANGES A/B REGISTER BIT 
  00141 102600  IMSK4 OTA *-* 
  00142 103700  IMSK5 STC *-*,C 
  00143 106700  IMSK6 CLC *-* 
  00144 015365  IMSK9 JSB INTRY          BRANCH TO INTERRUPT ROUTINE
* 
* THIS SECTION CLEARS THE INTERRUPT ROUTINE ON RESTART
* 
  00145 061404        LDA RSSOC          A=RSS OP CODE
  00146 071303        STA HOLDF          CLEAR IPLOT BUSY TRAP
* 
* THIS SECTION TESTS SWITCH REGISTER AND SELECTS TEST ROUTINE 
* 
  00147 102000  STST0 HLT 0B             HALT FOR SWITCH SETTING
  00150 102501        LIA 1B             READ SWITCH REGISTER 
  00151 000010        SLA                TEST BIT  0
  00152 024206        JMP PROG1          START VERIFICATION SEQUENCE
  00153 001310        RAR,SLA            TEST BIT 1 
  00154 024206        JMP PROG1          START PROGRAM 1
  00155 001310        RAR,SLA            TEST BIT 2 
  00156 024352        JMP PROG2          START PROGRAM 2
  00157 001310        RAR,SLA            TEST BIT 3 
  00160 024413        JMP PROG3          START PROGRAM 3
  00161 001310        RAR,SLA            TEST BIT 4 
  00162 024415        JMP PROG4          START PROGRAM 4
  00163 001310        RAR,SLA            TEST BIT 5 
  00164 024417        JMP PROG5          START PROGRAM 5
  00165 001310        RAR,SLA            TEST BIT 6 
  00166 024421        JMP PROG6          START PROGRAM 6
  00167 001310        RAR,SLA            TEST BIT 7 
  00170 024460        JMP TEST1          START SERVICE TEST 1 
  00171 001310        RAR,SLA            TEST BIT 8 
  00172 024474        JMP TEST2          START SERVICE TEST 2 
  00173 001310        RAR,SLA            TEST BIT 9 
  00174 024511        JMP TEST3          START SERVICE TEST 3 
  00175 001310        RAR,SLA            TEST BIT 10
  00176 024525        JMP TEST4          START SERVICE TEST 4 
  00177 001310        RAR,SLA            TEST BIT 11
  00200 024541        JMP TEST5          START SERVICE TEST 5 
  00201 001310        RAR,SLA            TEST BIT 12
  00202 024566        JMP TEST6          START SERVICE TEST 6 
  00203 001310        RAR,SLA            TEST BIT 13
  00204 024613        JMP TEST7          START SERVICE TEST 7 
  00205 024147        JMP STST0          RESET SWITCH REGISTER
* 
* THIS  SSECTION CONTAINS THE TEST ROUTINES 
* 
  00206 002400  PROG1 CLA                GET ABSOLUTE CONTROL BITS
  00207 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00210 106700  IWD11 CLC *-*            CLEAR PLOTTER CONTROL
  00211 102100        STF 0B             ENABLE INTERRUPT SYSTEM
  00212 061153        LDA BUF10          A=ADDRESS OF BUFFER
  00213 006404        CLB,INB            B=POINT COUNT
  00214 015302        JSB IPLOT          PROCESS BUFFER 
  00215 061157        LDA BUF11          A=ADDRESS OF BUFFER
  00216 065160        LDB BUF11+1        B=POINT COUNT
  00217 015302        JSB IPLOT          PROCESS BUFFER 
  00220 002400        CLA                A=NOP OP CODE
  00221 051303        CPA HOLDF          A=HOLDF IF IPLOT BUSY
  00222 024221        JMP *-1            TRY AGAIN IF IPLOT IS BUSY 
  00223 103100        CLF 0B             DISABLE INTERRUPT SYSTEM 
  00224 002500        CLA,CLE 
  00225 006400        CLB 
  00226 015232        JSB BPLOT          TO 0,0 PEN UP
  00227 002300        CCE 
  00230 060640        LDA I9999 
  00231 064640        LDB I9999 
  00232 015232        JSB BPLOT          TO 9999,9999 PEN DOWN
  00233 002400        CLA 
  00234 006400        CLB 
  00235 015232        JSB BPLOT          TO 0,0 PEN DOWN
  00236 000040        CLE 
  00237 064653        LDB I0500 
  00240 015232        JSB BPLOT          TO 0,500 PEN UP
  00241 002300        CCE 
  00242 060640        LDA I9999 
  00243 015232        JSB BPLOT          TO 9999,500 PEN DOWN 
  00244 000040        CLE 
  00245 064646        LDB I5000 
  00246 015232        JSB BPLOT          TO 9999,5000 PEN UP
  00247 002700        CLA,CCE 
  00250 015232        JSB BPLOT          TO 0,5000 PEN DOWN 
  00251 000040        CLE 
  00252 064641        LDB I9500 
  00253 015232        JSB BPLOT          TO 0,9500 PEN UP 
  00254 002300        CCE 
  00255 060640        LDA I9999 
  00256 015232        JSB BPLOT          TO 9999,9500 PEN DOWN
  00257 000040        CLE 
  00260 060652        LDA I0667 
  00261 064640        LDB I9999 
  00262 015232        JSB BPLOT          TO 667,9999 PEN UP 
  00263 006700        CLB,CCE 
  00264 015232        JSB BPLOT          TO 667,0 PEN DOWN
  00265 000040        CLE 
  00266 060646        LDA I5000 
  00267 015232        JSB BPLOT          TO 5000,0 PEN UP 
  00270 002300        CCE 
  00271 064640        LDB I9999 
  00272 015232        JSB BPLOT          TO 5000,9999 PEN DOWN
  00273 000040        CLE 
  00274 060642        LDA I9334 
  00275 015232        JSB BPLOT          TO 9334,9999  PEN UP 
  00276 006700        CLB,CCE 
  00277 015232        JSB BPLOT          TO 9334,0 PEN DOWN 
  00300 002500        CLA,CLE 
  00301 064640        LDB I9999 
  00302 015232        JSB BPLOT          TO 0,9999 PEN UP 
  00303 061400        LDA PENDN          PEN DOWN COMMAND 
  00304 015274        JSB WDOUT          LOWER PEN
  00305 006004        INB                B=10000
  00306 044661        ADB M1000          Y=Y-1000 
  00307 002500        CLA,CLE 
  00310 015232        JSB BPLOT          TO 0,Y PEN UP
  00311 061400        LDA PENDN          A=PEN DOWN COMMAND 
  00312 015274        JSB WDOUT          SEND PEN COMMAND 
  00313 006002        SZB                CONTINUE IF B=0
  00314 024306        JMP *-6            REPEAT IF B#0
  00315 060656        LDA M0015          A=POINT COUNT
  00316 071151        STA CNTR1          INITIALIZE COUNTER 
  00317 060665        LDA TORG1          A=TABLE ORIGINE
  00320 071152        STA PNTR1          INITIALIZE POINTER 
  00321 035152        ISZ PNTR1          INCREMENT POINTER
  00322 161152        LDA PNTR1,I        A=X VALUE
  00323 015232        JSB BPLOT          TO X,0 PEN UP
  00324 061400        LDA PENDN          A=PEN DOWN COMMAND 
  00325 015274        JSB WDOUT          LOWER PEN
  00326 035151        ISZ CNTR1          INCREMENT COUNTR 
  00327 024321        JMP *-6            PROCESS NEXT POINT 
  00330 002400        CLA 
  00331 064640        LDB I9999 
  00332 015232        JSB BPLOT          TO 0,9999 PEN UP 
  00333 002300        CCE 
  00334 040650        ADA I1111          X=X+1111 
  00335 044662        ADB M1111          Y=Y-1111 
  00336 015232        JSB BPLOT          TO X,Y PEN DOWN
  00337 006002        SZB                TEST FOR COMPLETION
  00340 024334        JMP *-4            PROCESS NEXT POINT 
  00341 000040        CLE 
  00342 060651        LDA I1000 
  00343 064646        LDB I5000 
  00344 015232        JSB BPLOT          TO 1000,5000 PEN UP
  00345 102501        LIA 1B             READ SWITCH REGISTER 
  00346 002021        SSA,RSS            RESET IF BIT15 = 1 
  00347 002011        SLA,RSS            CONTINUE IF BIT0 =1
  00350 024147        JMP STST0          RESET SWITCH REGISTER
  00351 102077        HLT 77B            HALT FOR FRESH PAPER 
  00352 002400  PROG2 CLA                GET ABSOLUTE CONTROL BITS
  00353 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00354 000040        CLE 
  00355 060646        LDA I5000 
  00356 064646        LDB I5000 
  00357 015232        JSB BPLOT          TO 5000,5000 PEN UP
  00360 014453        JSB RSTAT          A=PLOTTER STATUS 
  00361 000010        SLA                CONTINUE IF BIT0 = 0 
  00362 102001        HLT 1B             HALT IF PEN STATUS=1 
  00363 061377        LDA PENUP          A=PEN UP COMMAND 
  00364 015274        JSB WDOUT          SEND PEN COMMAND 
  00365 014453        JSB RSTAT          A=PLOTTER STATUS 
  00366 000010        SLA                CONTINUE IF BIT0 = 0 
  00367 102002        HLT 2B             HALT IF PEN STATUS=1 
  00370 061400        LDA PENDN          A=PEN DOWN COMMAND 
  00371 015274        JSB WDOUT          SEND PEN COMMAND 
  00372 014453        JSB RSTAT          A=PLOTTER STATUS 
  00373 002011        SLA,RSS            CONTINUE IF BIT0 = 1 
  00374 102003        HLT 3B             HALT IF PEN STATUS=0 
  00375 061400        LDA PENDN          A=PEN DOWN COMMAND 
  00376 015274        JSB WDOUT          SEND PEN COMMAND 
  00377 014453        JSB RSTAT          A=PEN STATUS 
  00400 002011        SLA,RSS            CONTINUE IF BIT0 = 1 
  00401 102004        HLT 4B             HALT IF PEN STATUS=0 
  00402 061377        LDA PENUP          A=PEN UP COMMAND 
  00403 015274        JSB WDOUT          SEND PEN COMMAND 
  00404 014453        JSB RSTAT          A=PLOTTER STATUS 
  00405 000010        SLA                CONTINUE IF BIT0 = 0 
  00406 102005        HLT 5B             HALT IF PEN STATUS=1 
  00407 102501        LIA 1B             READ SWITCH REGISTER 
  00410 002021        SSA,RSS            RESET IF BIT15 = 1 
  00411 002011        SLA,RSS            CONTINUE IF BIT0 =1
  00412 024147        JMP STST0          RESET SWITCH REGISTER
  00413 060705  PROG3 LDA TORG2          A=PASS TABLE ADDRESS 
  00414 014424        JSB PTOUT          SEND PASS TABLE
  00415 060756  PROG4 LDA TORG3          A=PASS TABLE ADDRESS 
  00416 014424        JSB PTOUT          SEND PASS TABLE
  00417 061027  PROG5 LDA TORG4          A=PASS TABLE ADDRESS 
  00420 014424        JSB PTOUT          SEND PASS TABLE
  00421 061100  PROG6 LDA TORG5          A=PASS TABLE ADDRESS 
  00422 014424        JSB PTOUT          SEND PASS TABLE
  00423 024147        JMP STST0          RESET SWITCH REGISTER
  00424 000000  PTOUT NOP                RETURN ADDRESS 
  00425 071152        STA PNTR1          INITIALIZE TABLE POINTER 
  00426 002500        CLA,CLE 
  00427 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00430 060646        LDA I5000 
  00431 064646        LDB I5000 
  00432 015232        JSB BPLOT          TO 5000,5000 PEN UP
  00433 061400        LDA PENDN          A=PEN DOWN COMMAND 
  00434 015274        JSB WDOUT          SEND PEN COMMAND 
  00435 064657        LDB M0040          INITIALISE PASS COUNTER
  00436 161152        LDA PNTR1,I        A=PASS 
  00437 015274        JSB WDOUT          SEND PASS
  00440 035152        ISZ PNTR1          INCREMENT TABLE POINTER
  00441 006006        INB,SZB            INCREMENT COUNTER & TEST 
  00442 024436        JMP *-4            SEND NEXT PASS IF B#0
  00443 102501        LIA 1B             READ SWITCHES IF B=0 
  00444 002021        SSA,RSS            RESET IF BIT15 = 1 
  00445 002011        SLA,RSS            CONTINUE IF BIT0 = 1 
  00446 002001        RSS                SKIP TO RESET
  00447 124424        JMP PTOUT,I        RETURN AND CONTINUE
  00450 061377        LDA PENUP          A=PEN UP COMMAND 
  00451 015274        JSB WDOUT          SEND PEN COMMAND 
  00452 024147        JMP STST0          RESET SWITCH REGISTER
  00453 000000  RSTAT NOP                RETURN ADDRESS 
  00454 102300  IWD21 SFS *-*            CONTINUE IF FLAG SET 
  00455 024454        JMP *-1            TRY AGAIN IF FLAG CLEAR
  00456 102500  IWD22 LIA *-*            A=CURRENT PLOTTER STATUS 
  00457 124453        JMP RSTAT,I        RETURN TO CALL 
  00460 002400  TEST1 CLA                GET ABSOLUTE CONTROL BITS
  00461 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00462 002500        CLA,CLE 
  00463 006400        CLB 
  00464 015232        JSB BPLOT          TO 0,0 PEN UP
  00465 060651        LDA I1000 
  00466 064651        LDB I1000 
  00467 015232        JSB BPLOT          TO 1000,1000 PEN UP
  00470 102501        LIA 1B             READ SWITCH REGISTER 
  00471 002021        SSA,RSS            TEST BIT 15
  00472 024462        JMP *-8            CONTINUE IF OFF
  00473 024147        JMP STST0          RESET SWITCH REGISTER IF ON
  00474 002400  TEST2 CLA                GET ABSOLUTE CONTROL BITS
  00475 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00476 000040        CLE 
  00477 060644        LDA I7600 
  00500 064644        LDB I7600 
  00501 015232        JSB BPLOT          TO 7600,7600 PEN UP
  00502 060643        LDA I8600 
  00503 064643        LDB I8600 
  00504 015232        JSB BPLOT          TO 8600,8600 PEN UP
  00505 102501        LIA 1B             READ SWITCH REGISTER 
  00506 002021        SSA,RSS            TEST BIT 15
  00507 024477        JMP *-8            REPEAT IF BIT OFF
  00510 024147        JMP STST0          RESET SWITCH REGISTER IF ON
  00511 002400  TEST3 CLA                GET ABSOLUTE CONTROL BITS
  00512 071374        STA WORD4          SET MODE ABSOLUTE
  00513 002500        CLA,CLE 
  00514 006400        CLB 
  00515 015232        JSB BPLOT          TO 0,0 PEN UP
  00516 060654        LDA I0200 
  00517 064651        LDB I1000 
  00520 015232        JSB BPLOT          TO 200,1000 PEN UP 
  00521 102501        LIA 1B             READ SWITCH REGISTER 
  00522 002021        SSA,RSS            TEST BIT 15
  00523 024513        JMP *-8            REPEAT IF BIT OFF
  00524 024147        JMP STST0          RESET SWITCHES IF ON 
  00525 002400  TEST4 CLA                GET ABSOLUTE CONTROL BITS
  00526 071374        STA WORD4          SET MODE ABSOLUTE
  00527 002500        CLA,CLE 
  00530 006400        CLB 
  00531 015232        JSB BPLOT          TO 0,0 PEN UP
  00532 060651        LDA I1000 
  00533 064654        LDB I0200 
  00534 015232        JSB BPLOT          TO 1000,2000 PEN UP
  00535 102501        LIA 1B             READ SWITCH REGISTER 
  00536 002021        SSA,RSS            TEST BIT 15
  00537 024527        JMP *-8            REPEAT IF  BIT OFF 
  00540 024147        JMP STST0          READ SWITCH REGISTER 
  00541 002400  TEST5 CLA                GET ABSOLUTE CONTROL BITS
  00542 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00543 002500        CLA,CLE 
  00544 006400        CLB 
  00545 015232        JSB BPLOT          TO 0,0 PEN UP
  00546 061403        LDA RWORD          GET RELATIVE CONTROL BITS
  00547 071374        STA WORD4          SET MODE TO RELATIVE 
  00550 002300        CCE 
  00551 060646        LDA I5000 
  00552 064655        LDB I0100 
  00553 015232        JSB BPLOT          TO 5000,100 PEN DOWN 
  00554 060664        LDA M5000 
  00555 064660        LDB M0100 
  00556 015232        JSB BPLOT          MOVE -5000,-100 PEN DOWN 
  00557 002400        CLA 
  00560 064655        LDB I0100 
  00561 015232        JSB BPLOT          MOVE 0,100 PEN UP
  00562 102501        LIA 1B             READ SWITCH REGISTER 
  00563 002021        SSA,RSS            TEST BIT 15
  00564 024551        JMP *-11           REPEAT IF BIT OFF
  00565 024147        JMP STST0          RESET SWITCHES IF ON 
  00566 002400  TEST6 CLA                GET ABSOLUTE CONTROL BITS
  00567 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00570 060645        LDA I5100 
  00571 006500        CLB,CLE 
  00572 015232        JSB BPLOT          TO 5100,0 PEN UP 
  00573 061403        LDA RWORD          GET RELATIVE CONTROL BITS
  00574 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00575 002300        CCE 
  00576 060655        LDA I0100 
  00577 064646        LDB I5000 
  00600 015232        JSB BPLOT          MOVE 100,5000 PEN DOWN 
  00601 060660        LDA M0100 
  00602 064664        LDB M5000 
  00603 015232        JSB BPLOT          MOVE -100,-5000 PEN DOWN 
  00604 060655        LDA I0100 
  00605 006400        CLB 
  00606 015232        JSB BPLOT          MOVE 100,0 PEN DOWN
  00607 102501        LIA 1B             READ SWITCH REGISTER 
  00610 002021        SSA,RSS            TEST BIT 15
  00611 024576        JMP *-11           REPEAT IF BIT OFF
  00612 024147        JMP STST0          RESET SWITCHES IF ON 
  00613 002400  TEST7 CLA                GET ABSOLUTE CONTROL BITS
  00614 071374        STA WORD4          SET MODE TO ABSOLUTE 
  00615 002500        CLA,CLE 
  00616 064645        LDB I5100 
  00617 015232        JSB BPLOT          TO 0,5100 PEN UP 
  00620 061403        LDA RWORD          GET RELATIVE CONTROL BITS
  00621 071374        STA WORD4          SET MODE TO RELATIVE 
  00622 002300        CCE 
  00623 060647        LDA I4000 
  00624 064647        LDB I4000 
  00625 015232        JSB BPLOT          MOVE 4000,4000 PEN UP
  00626 060663        LDA M4000 
  00627 064663        LDB M4000 
  00630 015232        JSB BPLOT          MOVE -4000,-4000 PEN DOWN
  00631 060655        LDA I0100 
  00632 006400        CLB 
  00633 015232        JSB BPLOT          MOVE 100,0 PEN DOWN
  00634 102501        LIA 1B             READ SWITCH REGISTER 
  00635 002021        SSA,RSS            TEST BIT 15
  00636 024623        JMP *-11           REPEAT IF BIT OFF
  00637 024147        JMP STST0          RESET SWITCHES IF ON 
* 
* CONSTANTS AND VARIABLES FOR THE TEST ROUTINES 
* 
  00640 023417  I9999 DEC 9999
  00641 022434  I9500 DEC 9500
  00642 022166  I9334 DEC 9334
  00643 020630  I8600 DEC 8600
  00644 016660  I7600 DEC 7600
  00645 011754  I5100 DEC 5100
  00646 011610  I5000 DEC 5000
  00647 007640  I4000 DEC 4000
  00650 002127  I1111 DEC 1111
  00651 001750  I1000 DEC 1000
  00652 001233  I0667 DEC 667 
  00653 000764  I0500 DEC 500 
  00654 000310  I0200 DEC 200 
  00655 000144  I0100 DEC 100 
  00656 177761  M0015 DEC -15 
  00657 177730  M0040 DEC -40 
  00660 177634  M0100 DEC -100
  00661 176030  M1000 DEC -1000 
  00662 175651  M1111 DEC -1111 
  00663 170140  M4000 DEC -4000 
  00664 166170  M5000 DEC -5000 
  00665 000665  TORG1 DEF *              TABLE STARTING ADDRESS-1 
  00666 001233        DEC 667 
  00667 002465        DEC 1333
  00670 003717        DEC 1999
  00671 005152        DEC 2666
  00672 006405        DEC 3333
  00673 007637        DEC 3999
  00674 011072        DEC 4666
  00675 012325        DEC 5333
  00676 013557        DEC 5999
  00677 015012        DEC 6666
  00700 016245        DEC 7333
  00701 017477        DEC 7999
  00702 020732        DEC 8666
  00703 022165        DEC 9333
  00704 023417        DEC 9999
  00705 000706  TORG2 DEF *+1            PASS TABLE ADDRESS 
  00706 102013        OCT 102013
  00707 000270        OCT 000270
  00710 000013        OCT 000013
  00711 000270        OCT 000270
  00712 102017        OCT 102017
  00713 000240        OCT 000240
  00714 000011        OCT 000011
  00715 000304        OCT 000304
  00716 102013        OCT 102013
  00717 000270        OCT 000270
  00720 000007        OCT 000007
  00721 000320        OCT 000320
  00722 102011        OCT 102011
  00723 000304        OCT 000304
  00724 000003        OCT 000003
  00725 000350        OCT 000350
  00726 102007        OCT 102007
  00727 000320        OCT 000320
  00730 000007        OCT 000007
  00731 000320        OCT 000320
  00732 102003        OCT 102003
  00733 000350        OCT 000350
  00734 000011        OCT 000011
  00735 000304        OCT 000304
  00736 102007        OCT 102007
  00737 000320        OCT 000320
  00740 000013        OCT 000013
  00741 000270        OCT 000270
  00742 102011        OCT 102011
  00743 000304        OCT 000304
  00744 000017        OCT 000017
  00745 000240        OCT 000240
  00746 102013        OCT 102013
  00747 000270        OCT 000270
  00750 000013        OCT 000013
  00751 000270        OCT 000270
  00752 102023        OCT 102023
  00753 000210        OCT 000210
  00754 000023        OCT 000023
  00755 000210        OCT 000210
  00756 000757  TORG3 DEF *+1            PASS TABLE ADDRESS 
  00757 102370        OCT 102370
  00760 000060        OCT 000060
  00761 000007        OCT 000007
  00762 004320        OCT 004320
  00763 102376        OCT 102376
  00764 000014        OCT 000014
  00765 000374        OCT 000374
  00766 004030        OCT 004030
  00767 102376        OCT 102376
  00770 000014        OCT 000014
  00771 000003        OCT 000003
  00772 004350        OCT 004350
  00773 102374        OCT 102374
  00774 000030        OCT 000030
  00775 000001        OCT 000001
  00776 004364        OCT 004364
  00777 102003        OCT 102003
  01000 000350        OCT 000350
  01001 000001        OCT 000001
  01002 004364        OCT 004364
  01003 102001        OCT 102001
  01004 000364        OCT 000364
  01005 000003        OCT 000003
  01006 004350        OCT 004350
  01007 102001        OCT 102001
  01010 000364        OCT 000364
  01011 000374        OCT 000374
  01012 004030        OCT 004030
  01013 102003        OCT 102003
  01014 000350        OCT 000350
  01015 000376        OCT 000376
  01016 004014        OCT 004014
  01017 102374        OCT 102374
  01020 000030        OCT 000030
  01021 000376        OCT 000376
  01022 004014        OCT 004014
  01023 102007        OCT 102007
  01024 000320        OCT 000320
  01025 000370        OCT 000370
  01026 004060        OCT 004060
  01027 001030  TORG4 DEF *+1            PASS TABLE ADDRESS 
  01030 100160        OCT 100160
  01031 000000        OCT 000000
  01032 000160        OCT 000160
  01033 000000        OCT 000000
  01034 100140        OCT 100140
  01035 000000        OCT 000000
  01036 000165        OCT 000165
  01037 000000        OCT 000000
  01040 100160        OCT 100160
  01041 000000        OCT 000000
  01042 000200        OCT 000200
  01043 000000        OCT 000000
  01044 100165        OCT 100165
  01045 000000        OCT 000000
  01046 000220        OCT 000220
  01047 000000        OCT 000000
  01050 100200        OCT 100200
  01051 000000        OCT 000000
  01052 000200        OCT 000200
  01053 000000        OCT 000000
  01054 100220        OCT 100220
  01055 000000        OCT 000000
  01056 000165        OCT 000165
  01057 000000        OCT 000000
  01060 100200        OCT 100200
  01061 000000        OCT 000000
  01062 000160        OCT 000160
  01063 000000        OCT 000000
  01064 100165        OCT 100165
  01065 000000        OCT 000000
  01066 000140        OCT 000140
  01067 000000        OCT 000000
  01070 100160        OCT 100160
  01071 000000        OCT 000000
  01072 000160        OCT 000160
  01073 000000        OCT 000000
  01074 100120        OCT 100120
  01075 000000        OCT 000000
  01076 000120        OCT 000120
  01077 000000        OCT 000000
  01100 001101  TORG5 DEF *+1            PASS TABLE ADDRESS 
  01101 100040        OCT 100040
  01102 000000        OCT 000000
  01103 000040        OCT 000040
  01104 024000        OCT 024000
  01105 100005        OCT 100005
  01106 000000        OCT 000000
  01107 000020        OCT 000020
  01110 004000        OCT 004000
  01111 100005        OCT 100005
  01112 000000        OCT 000000
  01113 000020        OCT 000020
  01114 024000        OCT 024000
  01115 100020        OCT 100020
  01116 000000        OCT 000000
  01117 000005        OCT 000005
  01120 024000        OCT 024000
  01121 100020        OCT 100020
  01122 000000        OCT 000000
  01123 000005        OCT 000005
  01124 034000        OCT 034000
  01125 100005        OCT 100005
  01126 000000        OCT 000000
  01127 000020        OCT 000020
  01130 034000        OCT 034000
  01131 100005        OCT 100005
  01132 000000        OCT 000000
  01133 000020        OCT 000020
  01134 014000        OCT 014000
  01135 100020        OCT 100020
  01136 000000        OCT 000000
  01137 000005        OCT 000005
  01140 014000        OCT 014000
  01141 100020        OCT 100020
  01142 000000        OCT 000000
  01143 000005        OCT 000005
  01144 004000        OCT 004000
  01145 100040        OCT 100040
  01146 000000        OCT 000000
  01147 000040        OCT 000040
  01150 014000        OCT 014000
  01151 000000  CNTR1 OCT 000000         UTILITY COUNTER
  01152 000000  PNTR1 OCT 000000         UTILITY POINTER
  01153 001154  BUF10 DEF *+1            BUFFER STARTING ADDRESS
  01154 000000        DEC 0              PEN UP SPEC
  01155 011610        DEC 5000
  01156 000000        DEC 0 
  01157 001161  BUF11 DEF *+2            BUFFER STARTING ADDRESS
  01160 000024        DEC 20             BUFFER POINT COUNT 
  01161 000001        DEC 1              PEN DOWN SPEC
  01162 023417        DEC 9999
  01163 001750        DEC 1000
  01164 011610        DEC 5000
  01165 000000        DEC 0 
  01166 023417        DEC 9999
  01167 004704        DEC 2500
  01170 011610        DEC 5000
  01171 000000        DEC 0 
  01172 023417        DEC 9999
  01173 016514        DEC 7500
  01174 011610        DEC 5000
  01175 000000        DEC 0 
  01176 020213        DEC 8331
  01177 023417        DEC 9999
  01200 011610        DEC 5000
  01201 000000        DEC 0 
  01202 013043        DEC 5667
  01203 023417        DEC 9999
  01204 011610        DEC 5000
  01205 000000        DEC 0 
  01206 010355        DEC 4333
  01207 023417        DEC 9999
  01210 011610        DEC 5000
  01211 000000        DEC 0 
  01212 003204        DEC 1668
  01213 023417        DEC 9999
  01214 011610        DEC 5000
  01215 000000        DEC 0 
  01216 000000        DEC 0 
  01217 016514        DEC 7500
  01220 011610        DEC 5000
  01221 000000        DEC 0 
  01222 000000        DEC 0 
  01223 004704        DEC 2500
  01224 011610        DEC 5000
  01225 000000        DEC 0 
  01226 000000        DEC 0 
  01227 001750        DEC 1000
  01230 011610        DEC 5000
  01231 000000        DEC 0 
* 
* 
* THIS SUBROUTINE TRANSMITS INFORMATION TO THE PLOTTER
* WHEN THE INTERRUPT SYSTEM IS DISABLED 
* 
* WHEN CONTROL IS TRANSFERRED WITH A JSB BPLOT
* 
*      A=X COMPONENT
*      B=Y COMPONENT
*      E=PEN SPEC   IF E=0 THEN PEN RAISED BEFORE MOVE
*                   IF E=1 THEN PEN LOWERED BEFORE MOVE 
* 
*      THE MODE IS CONTROLLED BY THE CONTENTS OF WORD4
*      THE CODE IS ALWAYS BINARY
* 
*      THE CONTENTS OF A,B,E ARE UNCHANGED UPON RETURN
*      TO THE CALLING ROUTINE 
* 
* 
  01232 000000  BPLOT NOP                RETURN ADDRESS 
  01233 071375        STA SAVEA          A REGISTER =X
  01234 075376        STB SAVEB          B REGISTER = Y 
  01235 006440        CLB,SEZ            B=0 TEST FOR E=1 
  01236 006004        INB                B=1 SO B=E 
  01237 102300  IWD81 SFS *-*            GET STATUS IF FLAG SET 
  01240 025237        JMP *-1            TRY AGAIN IF FLAG CLEAR
  01241 102500  IWD82 LIA *-*            BIT0=1 IF PEN DOWN 
  01242 020001        XOR 1B             NO CHANGE IF BIT0=0
  01243 002011        SLA,RSS            CHANGE PEN IF BIT0=1 
  01244 025251        JMP *+5            SEND PASS1 IF BIT0=0 
  01245 061377        LDA PENUP          A=PEN UP COMMAND 
  01246 002040        SEZ                SEND PEN UP IF E=0 
  01247 061400        LDA PENDN          A=PEN DOWN COMMAND 
  01250 015274        JSB WDOUT          SEND PEN COMMAND 
  01251 061375        LDA SAVEA          A=X
  01252 001727        ALF,ALF            POSITION HIGH ORDER BITS 
  01253 011401        AND MASK1          EXTRACT HIGH ORDER BITS
  01254 031402        IOR MASK2          INSERT PASS1 CONTROL BITS
  01255 015274        JSB WDOUT          SEND PASS1 
  01256 061375        LDA SAVEA          A=X
  01257 011401        AND MASK1          EXTRACT LOW ORDER BITS 
  01260 015274        JSB WDOUT          SEND PASS2 
  01261 061376        LDA SAVEB          A=Y
  01262 001727        ALF,ALF            POSITION HIGH ORDER BITS 
  01263 011401        AND MASK1          EXTRACT HIGH ORDER BITS
  01264 015274        JSB WDOUT          SEND PASS3 
  01265 061376        LDA SAVEB          A=Y
  01266 011401        AND MASK1          EXTRACT LOW ORDER BITS 
  01267 031374        IOR WORD4          INSERT PASS4 CONTROL BITS
  01270 015274        JSB WDOUT          SEND PASS4 
  01271 061375        LDA SAVEA          RESTORE A
  01272 065376        LDB SAVEB          RESTORE B
  01273 125232        JMP BPLOT,I        RETURN TO CALL 
* 
* 
* THIS SUBROUTINE TRANSMITTS THE CONTENTS OF THE A REGISTER 
* TO THE PLOTTER WHEN THE INTERRUPT SYSTEM IS DISABLED
* 
* 
  01274 000000  WDOUT NOP                RETURN ADDRESS 
  01275 102300  IWD83 SFS *-*            SEND WORD IF FLAG SET
  01276 025275        JMP *-1            TRY AGAIN IF FLAG CLEAR
  01277 102600  IWD84 OTA *-*            LOAD OUTPUT REGISTER 
  01300 103700  IWD85 STC *-*,C          SEND DEVICE COMMAND;CLEAR FLAG 
  01301 125274        JMP WDOUT,I        RETURN TO CALL 
* 
* 
* THIS SUBROUTINE TRANSMITTS INFORMATION TO THE PLOTTER 
* WHEN THE INTERRUPT SYSTEM IS ENABLED
* 
* 
* CONTROL IS TRANSFERED TO THIS SUBROUTINE WITH 
* 
* 
*       JSB IPLOT 
* 
* 
* IPLOT PROCESSES INFORMATION STORED IN A BUFFER
* WHEN CONTROL IS TRANSFERRED TO IPLOT
* 
*       A = ADDRESS OF 1ST WORD OF BUFFER 
*       B = NUMBER OF POINTS GIVEN IN BUFFER
* 
* 
* THIS BUFFER SPECIFIES THE PEN STATE, THE MODE,
* AND ANY NUMBER OF POINTS THAT MIGHT BE CONVENIENT 
* 
* ALL THE POINTS IN A GIVEN BUFFER WILL HAVE THE
* SAME PEN POSITION AND MODE
* 
* 
* THE FORM OF THE BUFFER IS:
* 
* 
*       WORD1 - PEN POSITION
*       WORD2 - MODE
*       WORD3 - 1ST X COMPONENT 
*       WORD4 - 1ST Y COMPONENT 
*       WORD5 - 2ND X COMPONENT (OPTIONAL)
*       WORD6 - 2ND Y COMPONENT (OPTIONAL)
*         -            -             -
*         -            -             -
*         -            -             -
*         -            -             -
* 
* 
*       IF WORD1 = 0 PEN IS RAISED
*       IF WORD1 = 1 PEN IS LOWERED 
* 
*       IF WORD2 = 0 MODE IS RELATIVE 
*       IF WORD2 = 1 MODE IS ABSOLUTE 
* 
* 
*       ALL COMPONENTS ARE 16 BIT 2'S COMPLEMENT
*       BINARY INTEGERS 
* 
* 
* 
* 
* 
  01302 000000  IPLOT NOP                RETURN ADDRESS SAVED HERE
*                        HOLDF IS THE DRIVER BUSY TRAP
  01303 002001  HOLDF RSS                WHEN DRIVER BUSY (HOLDF) = NOP 
*                        WHEN DRIVER FREE (HOLDF) = RSS 
  01304 025303        JMP *-1            RETURN TO DRIVER BUSY TRAP 
  01305 007004        CMB,INB            B=NEGATED NUMBER OF POINTS 
  01306 075372        STB BUFLN          INITIALIZE POINT COUNTER 
  01307 164000        LDB 0B,I           B=PEN SPECIFICATION
  01310 075373        STB PNTST          SAVE PEN SPECIFICATION 
  01311 071371        STA BUFAD          SET BUFFER ADDRESS POINTER 
  01312 002400        CLA                A =NOP OP CODE 
  01313 071303        STA HOLDF          SET DRIVER BUSY (A=NOP)
  01314 061302        LDA IPLOT          A=RETURN ADDRESS 
  01315 071365        STA INTRY          REPLACE INTERRUPT ADDRESS
  01316 106500  NEXTP LIB *-*            B=CURRENT PLOTTER STATUS 
  01317 061373        LDA PNTST          A=PEN SPEC 
  01320 020001        XOR 1B             COMPARE STATUS WITH SPEC 
  01321 002011        SLA,RSS            IF BIT 0=1 CHANGE PEN
  01322 025327        JMP *+5            IF BIT 0=0 THEN SEND PASS1 
  01323 061400        LDA PENDN          A=PEN DOWN COMMAND 
  01324 004010        SLB                SEND PEN COMMAND IF BIT0=0 
  01325 061377        LDA PENUP          GET PEN UP COMMAND IF BIT0=1 
  01326 015357        JSB EXIT1          SEND PEN COMMAND 
  01327 035371        ISZ BUFAD          SET POINTER TO NEXT X COMPONENT
  01330 161371        LDA BUFAD,I        GET X COMPONENT
  01331 001727        ALF,ALF            POSITION HIGH ORDER BITS 
  01332 011401        AND MASK1          EXTRACT HIGH ORDER BITS
  01333 031402        IOR MASK2          INSERT PASS1 CONTROL BITS
  01334 015357        JSB EXIT1          SEND 1ST PASS
  01335 161371        LDA BUFAD,I        GET X COMPONENT
  01336 011401        AND MASK1          EXTRACT LOW ORDER BITS 
  01337 015357        JSB EXIT1          SEND 2ND PASS
  01340 035371        ISZ BUFAD          SET POINTER TO Y COMPONENT 
  01341 161371        LDA BUFAD,I        GET Y COMPONENT
  01342 001727        ALF,ALF            POSITION HIGH ORDER BITS 
  01343 011401        AND MASK1          EXTRACT HIGH ORDER BITS
  01344 015357        JSB EXIT1          SEND 3RD PASS
  01345 161371        LDA BUFAD,I        GET Y COMPONENT
  01346 011401        AND MASK1          EXTRACT LOW ORDER BITS 
  01347 031374        IOR WORD4          INSERT PASS4 CONTROL BITS
  01350 015357        JSB EXIT1          SEND 4TH PASS
  01351 035372        ISZ BUFLN          INCREMENT POINT COUNTER
  01352 025316        JMP NEXTP          SEND NEXT POINT IF(BUFLN)#0
  01353 106700  IWD92 CLC *-*            CLEAR CONTROL FF 
  01354 061404        LDA RSSOC          A=RSS OP CODE
  01355 071303        STA HOLDF          CLEAR DRIVER BUSY HOLD OFF 
  01356 025362        JMP EXIT2          TERMINATE PROCESSING 
  01357 000000  EXIT1 NOP                BRANCH ADDRESS SAVED HERE
  01360 102600  IWD93 OTA *-*            LOAD PASS INTO OUTPUT REGISTER 
  01361 103700  IWD94 STC *-*,C          SEND DEVICE COMMAND & CLEAR FLAG 
  01362 061375  EXIT2 LDA SAVEA          RESTORE CONTENTS OF A
  01363 065376        LDB SAVEB          RESTORE CONTENTS OF B
  01364 125365        JMP INTRY,I        RETURN TO INTERRUPT ADDRESS
  01365 000000  INTRY NOP                INTERRUPT ADDRESS SAVED HERE 
  01366 071375        STA SAVEA          SAVE CONTENTS OF A 
  01367 075376        STB SAVEB          SAVE CONTENTS OF B 
  01370 125357        JMP EXIT1,I        TRANSFER TO BRANCH ADDRESS 
* 
* 
*       *** VARIABLE STORAGE ***
* 
* 
  01371 000000  BUFAD OCT 000000         BUFFER ADDRESS POINTER 
  01372 000000  BUFLN OCT 000000         POINT COUNTER
  01373 000000  PNTST OCT 000000         CURRENT PEN SPECIFICATION
  01374 000000  WORD4 OCT 000000         PASS4 CONTROL BITS 
  01375 000000  SAVEA OCT 000000         VALUE OF A SAVES HERE
  01376 000000  SAVEB OCT 000000         VALUE OF B SAVED HERE
* 
* 
*       *** CONSTANT STORAGE ***
* 
* 
  01377 101000  PENUP OCT 101000         COMMAND FOR PEN UP 
  01400 101400  PENDN OCT 101400         COMMAND FOR PEN DOWN 
  01401 000377  MASK1 OCT 000377         EXTRACTS BITS 0 THROUGH 7
  01402 102000  MASK2 OCT 102000         PASS1 CONTROL BITS 
  01403 004000  RWORD OCT 004000         PASS4 CONTROL BITS FOR RELATIVE MODE 
  01404 002001  RSSOC RSS                OP CODE TO CLEAR HOLD OFF
* 
* 
                      END 
2 ERRORS
