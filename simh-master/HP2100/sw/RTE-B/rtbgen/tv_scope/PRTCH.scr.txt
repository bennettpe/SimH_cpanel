ASMB,R,B,L
      NAM PRLIB,7
      ENT PRTCH
      EXT .ENTR,EXEC
*
* BY ROBERTO SANCHO NOV 2022
* 
* 
*         PRTCH ENTRY POINT 
* 
* 
.LU   BSS 1         LU FOR PRINT
.CH   BSS 1         ASCII CHAR TO PRINT IN LU
PRTCH NOP         
      JSB .ENTR   
      DEF .LU
      LDA .LU,I     LOAD LU GIVEN AS PARAM
      STA CONWD     STORE LU IN CONTROL WORD
      LDA .CH,I     LOAD ASCII VALUE FOR CHAR TO SEND TO LU
      SSA           IS CH<0?
      JMP PRTCH,I    YES, CHAR TO PRINT IS NEGATIVE -> RETURN TO CALLING PROGRAM 
      AND B377      ISOLATE CHAR
      ALF,ALF       LEFT JUSTIFY CHAR INTO WORD
      STA BUF
      JSB EXEC      PRINT RTE CALL
       DEF *+5
       DEF RCODE
       DEF CONWD
       DEF BUF
       DEF BUFLN
      JMP PRTCH,I   RETURN TO CALLING PROGRAM 
* 
RCODE DEC 2
CONWD OCT 1
BUF   BSS 1
BUFLN DEC -1
B377  OCT 377
      END 
