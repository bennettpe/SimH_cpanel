ASMB,B,R,L,C
      NAM FSTAT,7 
      ENT FSTAT 
      EXT EXEC,.ENTR
      SPC 1 
*     FSTAT READS THE DIRECTORY OF DISCS TO THE 
*     USER SPECIFIED 125 WORD BUFFER
* 
*     CALLING SEQUENCE: 
      SPC 1 
*     CALL FSTAT(ISTAT) 
      SPC 1 
*     WHERE: ISTAT IS A 125 WORD BUFFER INTO
*            WHICH THE DIRECTORY WILL BE READ.
      SPC 5 
ISTAT NOP 
      SPC 1 
FSTAT NOP           ENTRY POINT 
      JSB .ENTR     FETCH THE 
      DEF ISTAT     ADDRESS 
      SPC 1 
      CCA           COMPUTE LAST
      ADA TATSD     SYSTEM DISC 
      STA TRACK     TRACK NUMBER
      JSB EXEC      CALL EXEC 
      DEF RTN       TO
      DEF .1        READ
      DEF .2        FROM LU 2 
      DEF ISTAT,I   TO THE USER BUFFER
      DEF .125      125 WORDS 
      DEF TRACK     FROM THE LAST TRACK 
      DEF .0        SECTOR 0
RTN   JMP FSTAT,I   RETURN
      SPC 3 
.1    DEC 1 
.2    DEC 2 
.125  DEC 125 
.0    NOP 
TRACK NOP 1756B 
      SPC 2 
A     EQU 0 
B     EQU 1 
TATSD EQU 1756B 
      SPC 1 
END   EQU * 
      SPC 1 
      END 
