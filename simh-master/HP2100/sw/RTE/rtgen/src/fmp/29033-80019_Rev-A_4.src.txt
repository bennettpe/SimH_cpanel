ASMB,B,R,L,C
      NAM WRIS$,7 
      ENT WRIS,IWRIS,WEOFS
      EXT %WRIS,%WRIN,%WEOF 
      EXT .ENTR 
*     THIS ROUTINE IS USED TO CALL THE WRITE SOURCE ROUTINE 
*     FROM A FORTRAN PROGRAM
*      INITILIZE CALL 
*     CALL IWRIS(IER)       IER=0 IF OK  -1 IF NO TRACKS
*      WRITE CALL 
*      CALL WRIS(BUF,L,ER)    BUFFER ,LENGTH(-CHARACTERS),ER SAME AS ABOVE
*     TERMINATE CALL
*     CALL WEOFS
       SPC 3
BUF   NOP 
L      NOP
ER    NOP 
WRIS  NOP 
      JSB .ENTR 
      DEF BUF 
      LDA BUF       GET THE BUFFER ADDRESS
      STA BA        SET IF FOR THE CALL 
      LDA L,I       GET THE LENGTH
       STA L          SET IT
      JSB %WRIS       CALL TO TRANSFER
      DEF RT
BA    NOP 
      DEF L 
      CCA,RSS       NO TRACK RETURN 
RT    CLA           NORMAL RETURN 
      STA ER,I      SET ERROR CODE
      JMP WRIS,I    RETURN
      SPC 2 
IER   NOP 
IWRIS NOP 
      JSB .ENTR 
      DEF IER 
      JSB %WRIN     MAKE INITILIZE CALL 
      CCB,RSS       NO DISC RETURN
      CLB           OK RETURN 
      STB IER,I     SET ERROR CODE
      JMP IWRIS,I     RETURN
      SPC 3 
WEOFS NOP 
      JSB %WEOF     WRITE THE END OF FILE 
      LDA WEOFS,I     GET THE RETURN ADDRESS
      JMP A,I       RETURN
        SPC 2 
A     EQU 0 
B     EQU 1 
      END 
