 00001                 NAM DOS
 00002                 ******** VERSION 1.00 ***********
 00003                 * WRITTEN BY R. H. UITERWYK
 00004                                    
 00005                 COMREG EQU $8018
 00006                 DATREG EQU $801B
 00007                 RESTRT EQU $2403
 00008                 READ   EQU $242B
 00009                 READ0  EQU $242E
 00010                 PRELIM EQU $2523
 00011                 WRITE  EQU $255F
 00012                 WRITE0 EQU $2561
 00013                 DRIVE  EQU $25AC
 00014                 TRACK  EQU $0000
 00015                 SECTOR EQU $0001
 00016                 BMEMH  EQU $0004
 00017                 EMEMH  EQU $0006
 00018                 SAVEX  EQU $0009
 00019                 PROGX  EQU $000B
 00020                 NDRIVE EQU $000D
 00021                                    
 00022      3000              ORG $3000
 00023 3000 0002       BUFNXT RMB 2
 00024 3002 0002       ENDBUF RMB 2
 00025 3004 0050       BUFFER RMB 80
 00026 3054 0001       CREFLG RMB 1
 00027 3055 0001       DECPNT RMB 1
 00028 3056 0001       LIBSEC RMB 1
 00029 3057 0001       NEEDNO RMB 1
 00030 3058 0001       TYPE   RMB 1
 00031 3059 0002       STARTX RMB 2
 00032 305B 0002       ENDX   RMB 2
 00033 305D 0002       GOX    RMB 2
 00034 305F 0002       HILINE RMB 2
 00035 3061 0002       TEMPX1 RMB 2
 00036 3063 0002       TEMPX2 RMB 2
 00037 3065 0002       TEMPX3 RMB 2
 00038 3067 0008       NAME   RMB 8
 00039 306F 0008       PASSWD RMB 8
 00040 3077 0100       DBUFFR RMB 256
 00041 3177 0020       OVERFL RMB 32
 00042                                    
 00043      2600              ORG $2600
 00044                                    
 00045 2600 CE 2988    DOS    LDX #COPMSG
 00046 2603 86 FF             LDA A #$FF
 00047 2605 B7 3055           STA A DECPNT
 00048 2608 BD 28A1           JSR OUTPUT
 00049 260B 8E A049    DOS1   LDS #$A049
 00050 260E BD 2A22           JSR DOSTRT
 00051 2611 20 F8             BRA DOS1
 00052 2613 7E E1D1    OUTCHA JMP OUTEEE
 00053      E1D1       OUTEEE EQU $E1D1
 00054 2616 7E E1AC    INCH   JMP INEEE
 00055      E1AC       INEEE  EQU $E1AC
 00056 2619 7E 261C    PRNCHA JMP OUTPIA
 00057 261C DF 09      OUTPIA STX SAVEX
 00058 261E CE 801C           LDX #$801C
 00059 2621 A7 00             STA A 0,X
 00060 2623 86 36             LDA A #$36
 00061 2625 A7 01             STA A 1,X
 00062 2627 86 3E             LDA A #$3E
 00063 2629 A7 01             STA A 1,X
 00064 262B 6D 01      OUTPI3 TST 1,X
 00065 262D 2A FC             BPL OUTPI3
 00066 262F A6 00             LDA A 0,X
 00067 2631 DE 09             LDX SAVEX
 00068 2633 39                RTS
 00069 2634 7D 3055    OUTCH  TST DECPNT
 00070 2637 26 DA             BNE OUTCHA
 00071 2639 20 DE             BRA PRNCHA
 00072 263B 7F 3055    PRINT  CLR DECPNT
 00073 263E 7E 2A3A           JMP READY
 00074                 ****************
 00075 2641 86 03      RLIB   LDA A #3
 00076 2643 20 08             BRA LIB1
 00077 2645 86 02      WLIB   LDA A #2
 00078 2647 7F 3057           CLR NEEDNO
 00079 264A 7F 3054           CLR CREFLG
 00080 264D 36         LIB1   PSH A
 00081 264E 86 02             LDA A #2
 00082 2650 97 00             STA A TRACK
 00083 2652 4F                CLR A
 00084 2653 97 01             STA A SECTOR
 00085 2655 BD 2523           JSR PRELIM
 00086 2658 96 01      LIB2   LDA A SECTOR
 00087 265A B7 3056           STA A LIBSEC
 00088 265D CE 3176           LDX #DBUFFR+255
 00089 2660 DF 06             STX EMEMH
 00090 2662 CE 3077           LDX #DBUFFR
 00091 2665 BD 242E           JSR READ0
 00092 2668 CE 3077           LDX #DBUFFR
 00093 266B 0F                SEI
 00094 266C 9F 09             STS SAVEX
 00095 266E C6 10      LIB3   LDA B #16
 00096 2670 FF 3063           STX TEMPX2
 00097 2673 8E 3066           LDS #NAME-1
 00098 2676 A6 00             LDA A 0,X
 00099 2678 81 FF             CMP A #$FF
 00100 267A 27 42             BEQ LIB7
 00101 267C 32         LIB4   PUL A
 00102 267D A1 00             CMP A 0,X
 00103 267F 26 0B             BNE LIB5
 00104 2681 08                INX
 00105 2682 5A                DEC B
 00106 2683 26 F7             BNE LIB4
 00107 2685 9E 09             LDS SAVEX
 00108 2687 01                NOP
 00109 2688 0E                CLI
 00110 2689 7E 272F           JMP LIB8
 00111 268C C1 09      LIB5   CMP B #9
 00112 268E 24 05             BCC LIB55
 00113 2690 CE 2819           LDX #PASERR
 00114 2693 20 20             BRA LIB65
 00115 2695 08         LIB55  INX
 00116 2696 5A                DEC B
 00117 2697 26 FC             BNE LIB55
 00118 2699 C6 10             LDA B #16
 00119 269B 08         LIB57  INX
 00120 269C 5A                DEC B
 00121 269D 26 FC             BNE LIB57
 00122 269F 09                DEX
 00123 26A0 9C 06             CPX EMEMH
 00124 26A2 27 03             BEQ LIB58
 00125 26A4 08                INX
 00126 26A5 20 C7             BRA LIB3
 00127 26A7 9E 09      LIB58  LDS SAVEX
 00128 26A9 01                NOP
 00129 26AA 0E                CLI
 00130 26AB 96 01             LDA A SECTOR
 00131 26AD 81 09             CMP A #9
 00132 26AF 26 A7             BNE LIB2
 00133 26B1 CE 27C7    LIB6   LDX #DSKFUL
 00134 26B4 32                PUL A
 00135 26B5 BD 28B0    LIB65  JSR CRLF
 00136 26B8 BD 28A1           JSR OUTPUT
 00137 26BB 7E 2403           JMP RESTRT
 00138 26BE 9E 09      LIB7   LDS SAVEX
 00139 26C0 01                NOP
 00140 26C1 0E                CLI
 00141 26C2 33                PUL B
 00142 26C3 C1 03             CMP B #3   IS IT READ
 00143 26C5 26 05             BNE LIB75
 00144 26C7 CE 27DB           LDX #NOTFND
 00145 26CA 20 E9             BRA LIB65
 00146 26CC 37         LIB75  PSH B
 00147 26CD 7C 0006           INC EMEMH
 00148 26D0 FF 3063           STX TEMPX2
 00149 26D3 0F                SEI
 00150 26D4 9F 09             STS SAVEX
 00151 26D6 8E 3066           LDS #NAME-1
 00152 26D9 C6 10             LDA B #16
 00153 26DB 32         LIB77  PUL A
 00154 26DC A7 00             STA A 0,X
 00155 26DE 08                INX
 00156 26DF 5A                DEC B
 00157 26E0 26 F9             BNE LIB77
 00158 26E2 9E 09             LDS SAVEX
 00159 26E4 01                NOP
 00160 26E5 0E                CLI
 00161 26E6 7D 3057           TST NEEDNO
 00162 26E9 26 0F             BNE LIB78
 00163 26EB B6 305B           LDA A ENDX
 00164 26EE B0 3059           SUB A STARTX
 00165 26F1 4C                INC A
 00166 26F2 16                TAB
 00167 26F3 54                LSR B
 00168 26F4 54                LSR B
 00169 26F5 5C                INC B
 00170 26F6 1B                ABA
 00171 26F7 B7 3057           STA A NEEDNO
 00172 26FA A6 02      LIB78  LDA A 2,X
 00173 26FC E6 03             LDA B 3,X
 00174 26FE F0 3057           SUB B NEEDNO
 00175 2701 82 00             SBC A #00
 00176 2703 2B AC             BMI LIB6
 00177 2705 A7 22             STA A 34,X
 00178 2707 E7 23             STA B 35,X
 00179 2709 6F 02             CLR 2,X
 00180 270B F6 3057           LDA B NEEDNO
 00181 270E E7 03             STA B 3,X
 00182 2710 EB 03             ADD B 3,X
 00183 2712 EB 01             ADD B 1,X
 00184 2714 4F                CLR A
 00185 2715 4C         LIB79  INC A
 00186 2716 C0 0A             SUB B #10
 00187 2718 24 FB             BCC LIB79
 00188 271A 4A                DEC A
 00189 271B CB 0A             ADD B #10
 00190 271D E7 21             STA B 33,X
 00191 271F AB 00             ADD A 0,X
 00192 2721 A7 20             STA A 32,X
 00193 2723 86 FF             LDA A #$FF
 00194 2725 A7 10             STA A 16,X
 00195 2727 B6 3058           LDA A TYPE
 00196 272A A7 04             STA A 4,X
 00197 272C 32                PUL A
 00198 272D 20 10             BRA LIB82
 00199 272F 32         LIB8   PUL A
 00200 2730 81 02             CMP A #2  ARE WE WRITING
 00201 2732 26 49             BNE LIB9
 00202 2734 7D 3054           TST CREFLG
 00203 2737 27 06             BEQ LIB82
 00204 2739 CE 282D           LDX #NOTCRE
 00205 273C 7E 26B5           JMP LIB65
 00206 273F F6 305B    LIB82  LDA B ENDX
 00207 2742 F0 3059           SUB B STARTX
 00208 2745 5C                INC B
 00209 2746 E1 03             CMP B 3,X
 00210 2748 23 06             BLS LIB88
 00211 274A CE 27ED           LDX #FLFULL
 00212 274D 7E 26B5           JMP LIB65
 00213 2750 C6 08      LIB88  LDA B #8
 00214 2752 0F                SEI
 00215 2753 9F 09             STS SAVEX
 00216 2755 8E 3058           LDS #STARTX-1
 00217 2758 32         LIB89  PUL A
 00218 2759 A7 05             STA A 5,X
 00219 275B 08                INX
 00220 275C 5A                DEC B
 00221 275D 26 F9             BNE LIB89
 00222 275F 9E 09             LDS SAVEX
 00223 2761 01                NOP
 00224 2762 0E                CLI
 00225 2763 FE 3063           LDX TEMPX2
 00226 2766 F6 3058           LDA B TYPE
 00227 2769 A6 14             LDA A 20,X
 00228 276B 27 03             BEQ *+5
 00229 276D 11                CBA
 00230 276E 26 1F             BNE LIB91
 00231 2770 E7 14             STA B 20,X
 00232 2772 B6 3056           LDA A LIBSEC
 00233 2775 97 01             STA A SECTOR
 00234 2777 CE 3077    LIB895 LDX #DBUFFR
 00235 277A BD 2561           JSR WRITE0
 00236 277D FE 3063    LIB9   LDX TEMPX2
 00237 2780 B6 3058           LDA A TYPE
 00238 2783 81 FF             CMP A #$FF
 00239 2785 27 0E             BEQ LIB95
 00240 2787 6D 14             TST 20,X
 00241 2789 27 0A             BEQ LIB95
 00242 278B A1 14             CMP A 20,X
 00243 278D 27 06             BEQ LIB95
 00244 278F CE 2803    LIB91  LDX #TYPERR
 00245 2792 7E 26B5           JMP LIB65
 00246 2795 EE 1B      LIB95  LDX 27,X
 00247 2797 FF 305F           STX HILINE
 00248 279A FE 3063           LDX TEMPX2
 00249 279D EE 19             LDX 25,X
 00250 279F FF 305D           STX GOX
 00251 27A2 FE 3063           LDX TEMPX2
 00252 27A5 EE 17             LDX 23,X
 00253 27A7 DF 06             STX EMEMH
 00254 27A9 FF 305B           STX ENDX
 00255 27AC FE 3063           LDX TEMPX2
 00256 27AF A6 10             LDA A 16,X
 00257 27B1 97 00             STA A TRACK
 00258 27B3 A6 11             LDA A 17,X
 00259 27B5 97 01             STA A SECTOR
 00260 27B7 A6 14             LDA A 20,X
 00261 27B9 B7 3058           STA A TYPE
 00262 27BC EE 15             LDX 21,X
 00263 27BE FF 3059           STX STARTX
 00264 27C1 DF 04             STX BMEMH
 00265 27C3 FE 3063           LDX TEMPX2
 00266 27C6 39         RETURN RTS
 00267                                    
 00268 27C7 44 49 53   DSKFUL FCC /DISK FULL - PACK/
 00269 27D7 0D 0A 15          FCB $0D,$0A,$15,4
 00270 27DB 46 49 4C   NOTFND FCC /FILE NOT FOUND/
 00271 27E9 0D 0A 15          FCB $0D,$0A,$15,4
 00272 27ED 46 49 4C   FLFULL FCC /FILE FULL - RENAME/
 00273 27FF 0D 0A 15          FCB $0D,$0A,$15,4
 00274 2803 46 49 4C   TYPERR FCC /FILE TYPE MISMATCH/
 00275 2815 0D 0A 15          FCB $0D,$0A,$15,4
 00276 2819 50 41 53   PASERR FCC /PASSWORD INVALID/
 00277 2829 0D 0A 15          FCB $0D,$0A,$15,4
 00278 282D 46 49 4C   NOTCRE FCC /FILE ALREADY EXISTS/
 00279 2840 0D 0A 15          FCB $0D,$0A,$15,4
 00280                                    
 00281 2844 CE 2898    DEL    LDX #DELMSG
 00282 2847 BD 28A1           JSR OUTPUT
 00283 284A 20 0A             BRA KEYBD0
 00284 284C 86 3F      KEYBD  LDA A #'?
 00285 284E BD 2634           JSR OUTCH
 00286 2851 86 20             LDA A #$20
 00287 2853 BD 2634           JSR OUTCH
 00288 2856 CE 3004    KEYBD0 LDX #BUFFER
 00289 2859 BD 2616    KEYBD1 JSR INCH
 00290 285C 4D                TST A
 00291 285D 27 FA             BEQ KEYBD1
 00292 285F 81 0A             CMP A #$0A
 00293 2861 27 F6             BEQ KEYBD1
 00294 2863 81 03             CMP A #$03
 00295 2865 26 03             BNE *+5
 00296 2867 7E 2A22           JMP DOSTRT
 00297 286A 81 18             CMP A #$18  CONTROL X
 00298 286C 27 D6             BEQ DEL
 00299 286E 81 0D             CMP A #$0D  IS IT C/R
 00300 2870 27 1B             BEQ IEXIT
 00301 2872 81 0F             CMP A #$0F  CONTROL O
 00302 2874 26 0D             BNE KEYBD2
 00303 2876 86 5F             LDA A #$5F
 00304 2878 BD 2634           JSR OUTCH
 00305 287B 8C 3004           CPX #BUFFER
 00306 287E 27 D9             BEQ KEYBD1
 00307 2880 09                DEX
 00308 2881 20 D6             BRA KEYBD1
 00309 2883 8C 304C    KEYBD2 CPX #BUFFER+72
 00310 2886 27 D1             BEQ KEYBD1
 00311 2888 A7 00             STA A 0,X
 00312 288A 08                INX
 00313 288B 20 CC             BRA KEYBD1
 00314 288D 86 04      IEXIT LDA A #$04
 00315 288F A7 00             STA A 0,X
 00316 2891 FF 3002           STX ENDBUF
 00317 2894 BD 28B0           JSR CRLF
 00318 2897 39                RTS
 00319                                    
 00320 2898 20 44 45   DELMSG FCC / DELETED/
 00321 28A0 04                FCB 4
 00322                                    
 00323                 * UNIVERSAL OUTPUT ROUTINE
 00324                                    
 00325 28A1 8D 06      OUTPUT BSR OUTNCR
 00326 28A3 20 0B             BRA CRLF
 00327 28A5 BD 2634    OUTPU1 JSR OUTCH
 00328 28A8 08                INX
 00329 28A9 A6 00      OUTNCR LDA A 0,X
 00330 28AB 81 04             CMP A #$04
 00331 28AD 26 F6             BNE OUTPU1
 00332 28AF 39                RTS
 00333 28B0 FF 28C8    CRLF   STX CRLFXX
 00334 28B3 CE 28BC           LDX #CRLFST
 00335 28B6 8D F1             BSR OUTNCR
 00336 28B8 FE 28C8           LDX CRLFXX
 00337 28BB 39                RTS
 00338                                    
 00339 28BC 0D 0A 15   CRLFST FCB $0D,$0A,$15
 00340 28BF FF FF FF FF       FCB $FF,$FF,$FF,$FF
 00341 28C3 04                FCB $04
 00342 28C4 FF FF FF FF       FCB $FF,$FF,$FF,$FF
 00343 28C8 0002       CRLFXX RMB 2
 00344                                    
 00345 28CA A6 00      SKIPSP LDA A 0,X
 00346 28CC 81 20             CMP A #$20
 00347 28CE 26 03             BNE *+5
 00348 28D0 08         INXSKP INX
 00349 28D1 20 F7             BRA SKIPSP
 00350 28D3 4D                TST A
 00351 28D4 39                RTS
 00352 28D5 8D F3      CCODE  BSR SKIPSP
 00353 28D7 FF 3000           STX BUFNXT
 00354 28DA 0F                SEI
 00355 28DB 9F 09             STS SAVEX
 00356 28DD CE 2907           LDX #DOSLIS-1
 00357 28E0 BE 3000    LOOP3  LDS BUFNXT
 00358 28E3 34                DES
 00359 28E4 08         LOOP4  INX
 00360 28E5 32                PUL A
 00361 28E6 81 20             CMP A #$20
 00362 28E8 27 FB             BEQ *-3
 00363 28EA E6 00             LDA B 0,X
 00364 28EC 27 11             BEQ OKCODE
 00365 28EE 11                CBA
 00366 28EF 27 F3             BEQ LOOP4
 00367 28F1 08         LOOP5  INX
 00368 28F2 8C 2985           CPX #COMEND
 00369 28F5 27 0C             BEQ NOCODE
 00370 28F7 E6 00             LDA B 0,X
 00371 28F9 26 F6             BNE LOOP5
 00372 28FB 08                INX
 00373 28FC 08                INX
 00374 28FD 20 E1             BRA LOOP3
 00375 28FF 08         OKCODE INX
 00376 2900 BF 3000           STS BUFNXT
 00377 2903 9E 09      NOCODE LDS SAVEX
 00378 2905 01                NOP
 00379 2906 0E                CLI
 00380 2907 39                RTS
 00381                                    
 00382 2908 4C 4F 41   DOSLIS FCC /LOAD/
 00383 290C 00                FCB 0
 00384 290D 2D3D              FDB LOAD
 00385 290F 52 55 4E          FCC /RUN/
 00386 2912 00                FCB 0
 00387 2913 2D59              FDB RUN
 00388 2915 53 41 56          FCC /SAVE/
 00389 2919 00                FCB 0
 00390 291A 2D65              FDB SAVE
 00391 291C 45 58 49          FCC /EXIT/
 00392 2920 00                FCB 0
 00393 2921 E0D0              FDB $E0D0
 00394 2923 44 4F 53          FCC /DOS/
 00395 2926 00                FCB 0
 00396 2927 2600              FDB DOS
 00397 2929 50 41 43          FCC /PACK/
 00398 292D 00                FCB 0
 00399 292E 2A52              FDB PACK
 00400 2930 49 4E 49          FCC /INIT/
 00401 2934 00                FCB 0
 00402 2935 2B39              FDB INIT
 00403 2937 54 45 53          FCC /TEST/
 00404 293B 00                FCB 0
 00405 293C 2F05              FDB TEST
 00406 293E 43 41 54          FCC /CATALOG/
 00407 2945 00                FCB 0
 00408 2946 2E2B              FDB CATAL
 00409 2948 43 41 54          FCC /CAT/
 00410 294B 00                FCB 0
 00411 294C 2E2B              FDB CATAL
 00412 294E 46 49 4C          FCC /FILES/
 00413 2953 00                FCB 0
 00414 2954 2E24              FDB FILES
 00415 2956 48 4F 4D          FCC /HOME/
 00416 295A 00                FCB 0
 00417 295B 2CB5              FDB HOME
 00418 295D 43 52 45          FCC /CREATE/
 00419 2963 00                FCB 0
 00420 2964 2C7D              FDB CREATE
 00421 2966 50 52 49          FCC /PRINT/
 00422 296B 00                FCB 0
 00423 296C 263B              FDB PRINT
 00424 296E 52 45 4E          FCC /RENAME/
 00425 2974 00                FCB 0
 00426 2975 2CBE              FDB RENAME
 00427 2977 44 45 4C          FCC /DELETE/
 00428 297D 00                FCB 0
 00429 297E 2CF6              FDB PURGE
 00430 2980 50 55 52          FCC /PURGE/
 00431 2985 00         COMEND FCB 0
 00432 2986 2CF6              FDB PURGE
 00433                                    
 00434 2988 53 57 54   COPMSG FCC /SWTPC V1.0 (C) 1977/
 00435 299B 04                FCB 4
 00436 299C 0D 0A 15   RDYMSG FCB $0D,$0A,$15,$FF,$FF
 00437 29A1 46 44 4F          FCC /FDOS READY/
 00438 29AB 04                FCB 4
 00439 29AC 46 49 4C   NAMMSG FCC /FILENAME/
 00440 29B4 04                FCB 4
 00441 29B5 46 49 52   FIRADD FCC /FIRST ADDRESS/
 00442 29C2 04                FCB 4
 00443 29C3 20 4C 41   LASADD FCC / LAST ADDRESS/
 00444 29D0 04                FCB 4
 00445 29D1 50 52 4F   PSTART FCC /PROGRAM START/
 00446 29DE 04                FCB 4
 00447 29DF 23 20 4F   SECNUM FCC /# OF SECTORS (HEX)/
 00448 29F1 04                FCB 4
 00449 29F2 41 52 45   SURMSG FCC /ARE YOU SURE/
 00450 29FE 04                FCB 4
 00451 29FF 42 41 44   TRKMSG FCC /BAD TRACK & SECTOR #/
 00452 2A13 04                FCB 4
 00453 2A14 4E 45 57   NEWMSG FCC /NEW/
 00454 2A17 04                FCB 4
 00455 2A18 54 45 53   TSTDON FCC /TEST DONE/
 00456 2A21 04                FCB 4
 00457                                    
 00458 2A22 8E A045    DOSTRT LDS #$A045
 00459 2A25 CE 2A22           LDX #DOSTRT
 00460 2A28 DF 0B             STX PROGX
 00461 2A2A CE 801C           LDX #$801C
 00462 2A2D C6 FF             LDA B #$FF
 00463 2A2F E7 00             STA B 0,X
 00464 2A31 C6 3E             LDA B #$3E
 00465 2A33 E7 01             STA B 1,X
 00466 2A35 86 FF             LDA A #$FF
 00467 2A37 B7 3055           STA A DECPNT
 00468 2A3A CE 299C    READY  LDX #RDYMSG
 00469 2A3D BD 28A1           JSR OUTPUT
 00470 2A40 BD 2856    DOSTR2 JSR KEYBD0
 00471 2A43 CE 3004           LDX #BUFFER
 00472 2A46 BD 28D5           JSR CCODE
 00473 2A49 8C 2985           CPX #COMEND
 00474 2A4C 27 07             BEQ RUNCOM
 00475 2A4E EE 00             LDX 0,X
 00476 2A50 6E 00             JMP 0,X
 00477 2A52 BD 2A72    PACK   JSR SELECT
 00478 2A55 CE 3004    RUNCOM LDX #BUFFER
 00479 2A58 BD 28CA           JSR SKIPSP
 00480 2A5B 81 04             CMP A #$04
 00481 2A5D 27 E1             BEQ DOSTR2
 00482 2A5F 09                DEX
 00483 2A60 86 24             LDA A #'$
 00484 2A62 A7 00             STA A 0,X
 00485 2A64 FF 3000           STX BUFNXT
 00486 2A67 BD 2AF0           JSR CLRPAS
 00487 2A6A 86 11             LDA A #$11
 00488 2A6C B7 3058           STA A TYPE
 00489 2A6F 7E 2D5E           JMP RUN0
 00490 2A72 FE 3000    SELECT LDX BUFNXT
 00491 2A75 BD 28CA           JSR SKIPSP
 00492 2A78 81 30             CMP A #$30
 00493 2A7A 2B 04             BMI NOSEL
 00494 2A7C 81 39             CMP A #$39
 00495 2A7E 2F 05             BLE OKSEL
 00496 2A80 4F         NOSEL  CLR A
 00497 2A81 BD 25AC           JSR DRIVE
 00498 2A84 39                RTS
 00499 2A85 80 30      OKSEL  SUB A #$30
 00500 2A87 81 03             CMP A #$03
 00501 2A89 2F 06             BLE OKSEL1
 00502 2A8B CE 2AA1           LDX #DRVERR
 00503 2A8E 7E 26B5           JMP LIB65
 00504 2A91 BD 25AC    OKSEL1 JSR DRIVE
 00505 2A94 08                INX
 00506 2A95 BD 28CA           JSR SKIPSP
 00507 2A98 81 2C             CMP A #',
 00508 2A9A 26 01             BNE SELEX
 00509 2A9C 08                INX
 00510 2A9D FF 3000    SELEX  STX BUFNXT
 00511 2AA0 39                RTS
 00512                                    
 00513 2AA1 44 52 49   DRVERR FCC /DRIVE ERROR/
 00514 2AAC 04                FCB 4
 00515                                    
 00516 2AAD CE 306F    GETPAS LDX #PASSWD
 00517 2AB0 20 03             BRA GETNA0
 00518 2AB2 CE 3067    GETNAM LDX #NAME
 00519 2AB5 FF 3061    GETNA0 STX TEMPX1
 00520 2AB8 C6 08             LDA B #8
 00521 2ABA 86 20             LDA A #$20
 00522 2ABC A7 00      GETN05 STA A 0,X
 00523 2ABE 08                INX
 00524 2ABF 5A                DEC B
 00525 2AC0 26 FA             BNE GETN05
 00526 2AC2 FE 3000           LDX BUFNXT
 00527 2AC5 A6 00      GETNA1 LDA A 0,X
 00528 2AC7 08                INX
 00529 2AC8 FF 3000           STX BUFNXT
 00530 2ACB 81 20             CMP A #$20
 00531 2ACD 27 20             BEQ GETNEX
 00532 2ACF 81 04             CMP A #$04
 00533 2AD1 27 1C             BEQ GETNEX
 00534 2AD3 81 2C             CMP A #',
 00535 2AD5 27 18             BEQ GETNEX
 00536 2AD7 FE 3061           LDX TEMPX1
 00537 2ADA A7 00             STA A 0,X
 00538 2ADC 08                INX
 00539 2ADD 8C 306F           CPX #NAME+8
 00540 2AE0 27 0D             BEQ GETNEX
 00541 2AE2 8C 3077           CPX #PASSWD+8
 00542 2AE5 27 08             BEQ GETNEX
 00543 2AE7 FF 3061           STX TEMPX1
 00544 2AEA FE 3000           LDX BUFNXT
 00545 2AED 20 D6             BRA GETNA1
 00546 2AEF 39                GETNEX RTS
 00547 2AF0 36                CLRPAS PSH A
 00548 2AF1 C6 08             LDA B #8
 00549 2AF3 FF 3061           STX TEMPX1
 00550 2AF6 CE 306F           LDX #PASSWD
 00551 2AF9 86 20             LDA A #$20
 00552 2AFB A7 00      CLRPA1 STA A 0,X
 00553 2AFD 08                         INX
 00554 2AFE 5A                         DEC B
 00555 2AFF 26 FA             BNE CLRPA1
 00556 2B01 FE 3061              LDX TEMPX1
 00557 2B04 32                         PUL A
 00558 2B05 39                         RTS
 00559                                    
 00560 2B06 BD 2A72    MAKNAM JSR SELECT
 00561 2B09 BD 28CA    MAKN JSR SKIPSP
 00562 2B0C 81 04             CMP A #$04
 00563 2B0E 27 0A             BEQ MAKNA0
 00564 2B10 81 30             CMP A #$30
 00565 2B12 25 17             BCS MAKNU1
 00566 2B14 81 3A             CMP A #$3A
 00567 2B16 24 13             BCC MAKNU1
 00568 2B18 20 EC             BRA MAKNAM
 00569 2B1A CE 29AC    MAKNA0 LDX #NAMMSG
 00570 2B1D BD 28A9           JSR OUTNCR
 00571 2B20 BD 284C           JSR KEYBD
 00572 2B23 CE 3004           LDX #BUFFER
 00573 2B26 FF 3000           STX BUFNXT
 00574 2B29 20 DE             BRA MAKN
 00575 2B2B BD 2AB2    MAKNU1 JSR GETNAM
 00576 2B2E BD 2AF0           JSR CLRPAS
 00577 2B31 81 2C             CMP A #',
 00578 2B33 26 03             BNE *+5
 00579 2B35 BD 2AAD           JSR GETPAS
 00580 2B38 39                RTS
 00581                                    
 00582 2B39 BD 2A72    INIT   JSR SELECT
 00583 2B3C CE 29F2           LDX #SURMSG
 00584 2B3F BD 28A9           JSR OUTNCR
 00585 2B42 BD 284C           JSR KEYBD
 00586 2B45 CE 3004           LDX #BUFFER
 00587 2B48 BD 28CA           JSR SKIPSP
 00588 2B4B 81 59             CMP A #'Y
 00589 2B4D 27 03             BEQ *+5
 00590 2B4F 7E 2A22           JMP DOSTRT
 00591 2B52 BD 2523           JSR PRELIM
 00592 2B55 4F                CLR A
 00593 2B56 97 00             STA A TRACK
 00594 2B58 97 01             STA A SECTOR
 00595 2B5A D6 00      INIT1  LDA B TRACK
 00596 2B5C F7 801B           STA B DATREG
 00597 2B5F C6 1B             LDA B #$1B  SEEK, LOAD, NOVERIFY
 00598 2B61 F7 8018           STA B COMREG
 00599 2B64 BD 27C6           JSR RETURN
 00600 2B67 BD 27C6           JSR RETURN
 00601 2B6A F6 8018    INIT11 LDA B COMREG
 00602 2B6D C5 01             BIT B #1
 00603 2B6F 26 F9             BNE INIT11
 00604 2B71 C6 F4             LDA B #$F4  WRITE TRACK
 00605 2B73 F7 8018           STA B COMREG
 00606 2B76 C6 2E             LDA B #46
 00607 2B78 4F                CLR A
 00608 2B79 BD 2C70    INIT2  JSR UNPACK
 00609 2B7C 5A                DEC B
 00610 2B7D 26 FA             BNE INIT2
 00611 2B7F 86 FC             LDA A #$FC
 00612 2B81 BD 2C70           JSR UNPACK
 00613 2B84 C6 0B             LDA B #11
 00614 2B86 4F                CLR A
 00615 2B87 BD 2C70    INIT22 JSR UNPACK
 00616 2B8A 5A                DEC B
 00617 2B8B 26 FA             BNE INIT22
 00618 2B8D C6 06      INIT3  LDA B #6
 00619 2B8F 4F                CLR A
 00620 2B90 BD 2C70    INIT31 JSR UNPACK
 00621 2B93 5A                DEC B
 00622 2B94 26 FA             BNE INIT31
 00623 2B96 86 FE             LDA A #$FE
 00624 2B98 BD 2C70           JSR UNPACK
 00625 2B9B 96 00             LDA A TRACK
 00626 2B9D BD 2C70           JSR UNPACK
 00627 2BA0 4F                CLR A
 00628 2BA1 BD 2C70           JSR UNPACK
 00629 2BA4 96 01             LDA A SECTOR
 00630 2BA6 BD 2C70           JSR UNPACK
 00631 2BA9 86 01             LDA A #$01
 00632 2BAB BD 2C70           JSR UNPACK
 00633 2BAE 86 F7             LDA A #$F7
 00634 2BB0 BD 2C70           JSR UNPACK
 00635 2BB3 C6 11             LDA B #17
 00636 2BB5 4F                CLR A
 00637 2BB6 BD 2C70    INIT33 JSR UNPACK
 00638 2BB9 5A                DEC B
 00639 2BBA 26 FA             BNE INIT33
 00640 2BBC 86 FB             LDA A #$FB
 00641 2BBE BD 2C70           JSR UNPACK
 00642 2BC1 5F                CLR B
 00643 2BC2 86 E5             LDA A #$E5
 00644 2BC4 BD 2C70    INIT35 JSR UNPACK
 00645 2BC7 5A                DEC B
 00646 2BC8 26 FA             BNE INIT35
 00647 2BCA 86 F7             LDA A #$F7
 00648 2BCC BD 2C70           JSR UNPACK
 00649 2BCF C6 0B             LDA B #11
 00650 2BD1 4F                CLR A
 00651 2BD2 BD 2C70    INIT37 JSR UNPACK
 00652 2BD5 5A                DEC B
 00653 2BD6 26 FA             BNE INIT37
 00654 2BD8 D6 01             LDA B SECTOR
 00655 2BDA 5C                INC B
 00656 2BDB D7 01             STA B SECTOR
 00657 2BDD C1 0A             CMP B #10
 00658 2BDF 26 AC             BNE INIT3
 00659 2BE1 F6 8018    INIT4 LDA B COMREG
 00660 2BE4 C5 01             BIT B #1
 00661 2BE6 27 02             BEQ INIT45
 00662 2BE8 20 F7             BRA INIT4
 00663 2BEA 4F         INIT45 CLR A
 00664 2BEB 97 01             STA A SECTOR
 00665 2BED 96 00             LDA A TRACK
 00666 2BEF 4C                INC A
 00667 2BF0 97 00             STA A TRACK
 00668 2BF2 81 23             CMP A #35
 00669 2BF4 27 03             BEQ INIT5
 00670 2BF6 7E 2B5A           JMP INIT1
 00671 2BF9 4F         INIT5 CLR A
 00672 2BFA 97 00             STA A TRACK
 00673 2BFC 97 01             STA A SECTOR
 00674 2BFE CE 2FFF           LDX #$2FFF
 00675 2C01 DF 06             STX EMEMH
 00676 2C03 CE 2400           LDX #$2400
 00677 2C06 BD 255F           JSR WRITE
 00678 2C09 4F                CLR A
 00679 2C0A 97 01             STA A SECTOR
 00680 2C0C 86 02             LDA A #2
 00681 2C0E 97 00             STA A TRACK
 00682 2C10 CE 3176           LDX #DBUFFR+255
 00683 2C13 DF 06             STX EMEMH
 00684 2C15 CE 3077           LDX #DBUFFR
 00685 2C18 86 24             LDA A #'$
 00686 2C1A A7 00             STA A 0,X
 00687 2C1C 08                INX
 00688 2C1D 86 44             LDA A #'D
 00689 2C1F A7 00             STA A 0,X
 00690 2C21 08                INX
 00691 2C22 86 4F             LDA A #'O
 00692 2C24 A7 00             STA A 0,X
 00693 2C26 08                INX
 00694 2C27 86 53             LDA A #'S
 00695 2C29 A7 00             STA A 0,X
 00696 2C2B C6 0C             LDA B #12
 00697 2C2D 86 20             LDA A #$20
 00698 2C2F 08                INX
 00699 2C30 A7 00      INIT51 STA A 0,X
 00700 2C32 08                INX
 00701 2C33 5A                DEC B
 00702 2C34 26 FA             BNE INIT51
 00703 2C36 6F 01             CLR 1,X
 00704 2C38 6F 02             CLR 2,X
 00705 2C3A 6F 04             CLR 4,X
 00706 2C3C 86 14             LDA A #20
 00707 2C3E A7 03             STA A 3,X
 00708 2C40 86 FF             LDA A #$FF
 00709 2C42 A7 10             STA A 16,X
 00710 2C44 86 03             LDA A #$03
 00711 2C46 A7 20             STA A 32,X
 00712 2C48 4F                CLR A
 00713 2C49 A7 21             STA A 33,X
 00714 2C4B A7 24             STA A 36,X
 00715 2C4D 6F 00             CLR 0,X
 00716 2C4F 9F 09             STS SAVEX
 00717 2C51 8E 2400           LDS #$2400
 00718 2C54 AF 05             STS 5,X
 00719 2C56 8E 2FFF           LDS #$2FFF
 00720 2C59 AF 07             STS 7,X
 00721 2C5B 8E 2600           LDS #$2600
 00722 2C5E AF 09             STS 9,X
 00723 2C60 8E 014A           LDS #$014A  NUMBER OF SECOTRS
 00724 2C63 AF 22             STS 34,X
 00725 2C65 9E 09             LDS SAVEX
 00726 2C67 CE 3077           LDX #DBUFFR
 00727 2C6A BD 2561           JSR WRITE0
 00728 2C6D 7E 2A22           JMP DOSTRT
 00729 2C70 37         UNPACK PSH B
 00730 2C71 F6 8018    UNPAC1 LDA B COMREG
 00731 2C74 C5 02             BIT B #2
 00732 2C76 27 F9             BEQ UNPAC1
 00733 2C78 B7 801B           STA A DATREG
 00734 2C7B 33                PUL B
 00735 2C7C 39                RTS
 00736 2C7D 4F         CREATE CLR A
 00737 2C7E B7 3058           STA A TYPE
 00738 2C81 BD 2B06           JSR MAKNAM
 00739 2C84 CE 29DF    CREAT2 LDX #SECNUM
 00740 2C87 BD 28A9           JSR OUTNCR
 00741 2C8A BD 284C           JSR KEYBD
 00742 2C8D CE 3004           LDX #BUFFER
 00743 2C90 BD 2DFB           JSR BYTE
 00744 2C93 25 EF             BCS CREAT2
 00745 2C95 B7 3057           STA A NEEDNO
 00746 2C98 CE 0000           LDX #$0000
 00747 2C9B FF 3059           STX STARTX
 00748 2C9E FF 305B           STX ENDX
 00749 2CA1 CE 2600           LDX #DOS
 00750 2CA4 FF 305D           STX GOX
 00751 2CA7 FF 305F           STX HILINE
 00752 2CAA 86 02             LDA A #2
 00753 2CAC B7 3054           STA A CREFLG
 00754 2CAF BD 264D           JSR LIB1
 00755 2CB2 7E 2A22           JMP DOSTRT
 00756 2CB5 BD 2A72    HOME   JSR SELECT
 00757 2CB8 BD 2523           JSR PRELIM
 00758 2CBB 7E 2A22           JMP DOSTRT
 00759 2CBE 86 FF      RENAME LDA A #$FF
 00760 2CC0 B7 3058           STA A TYPE
 00761 2CC3 BD 2B06           JSR MAKNAM
 00762 2CC6 BD 2641           JSR RLIB
 00763 2CC9 86 02             LDA A #$02
 00764 2CCB 97 00             STA A TRACK
 00765 2CCD B6 3056           LDA A LIBSEC
 00766 2CD0 97 01             STA A SECTOR
 00767 2CD2 FF 3063           STX TEMPX2
 00768 2CD5 CE 2A14           LDX #NEWMSG
 00769 2CD8 BD 28A9           JSR OUTNCR
 00770 2CDB BD 2B1A           JSR MAKNA0
 00771 2CDE C6 10             LDA B #16
 00772 2CE0 FE 3063           LDX TEMPX2
 00773 2CE3 9F 09             STS SAVEX
 00774 2CE5 0F                SEI
 00775 2CE6 8E 3066           LDS #NAME-1
 00776 2CE9 32         REN2   PUL A
 00777 2CEA A7 00             STA A 0,X
 00778 2CEC 08                INX
 00779 2CED 5A                DEC B
 00780 2CEE 26 F9             BNE REN2
 00781 2CF0 9E 09             LDS SAVEX
 00782 2CF2 01                NOP
 00783 2CF3 0E                CLI
 00784 2CF4 20 2A             BRA PURGE3
 00785                                    
 00786 2CF6 86 FF      PURGE  LDA A #$FF
 00787 2CF8 B7 3058           STA A TYPE
 00788 2CFB BD 2B06           JSR MAKNAM
 00789 2CFE B6 3067    PURGE1 LDA A NAME
 00790 2D01 81 24             CMP A #'$
 00791 2D03 26 03             BNE *+5
 00792 2D05 7E 2DA5           JMP GOAWAY
 00793 2D08 BD 2641           JSR RLIB
 00794 2D0B 86 02             LDA A #$02
 00795 2D0D 97 00             STA A TRACK
 00796 2D0F B6 3056           LDA A LIBSEC
 00797 2D12 97 01             STA A SECTOR
 00798 2D14 6F 14             CLR 20,X
 00799 2D16 C6 10             LDA B #16
 00800 2D18 86 20             LDA A #$20
 00801 2D1A A7 00      PURGE2 STA A 0,X
 00802 2D1C 08                INX
 00803 2D1D 5A                DEC B
 00804 2D1E 26 FA             BNE PURGE2
 00805 2D20 DE 0B      PURGE3 LDX PROGX
 00806 2D22 FF 3065           STX TEMPX3
 00807 2D25 CE 2D2A           LDX #PURGE4
 00808 2D28 DF 0B             STX PROGX
 00809 2D2A CE 3176    PURGE4 LDX #DBUFFR+255
 00810 2D2D DF 06             STX EMEMH
 00811 2D2F CE 3077           LDX #DBUFFR
 00812 2D32 BD 255F           JSR WRITE
 00813 2D35 FE 3065           LDX TEMPX3
 00814 2D38 DF 0B             STX PROGX
 00815 2D3A 7E 2A22           JMP DOSTRT
 00816 2D3D 86 22      LOAD   LDA A #$22
 00817 2D3F B7 3058           STA A TYPE
 00818 2D42 8D 03             BSR LOAD0
 00819 2D44 7E 2A22           JMP DOSTRT
 00820 2D47 BD 2B06    LOAD0  JSR MAKNAM
 00821 2D4A BD 2641           JSR RLIB
 00822 2D4D DE 04      LOAD3  LDX BMEMH
 00823 2D4F BD 242E           JSR READ0
 00824 2D52 FE 305D           LDX GOX
 00825 2D55 FF A048           STX $A048
 00826 2D58 39                RTS
 00827 2D59 86 22      RUN    LDA A #$22
 00828 2D5B B7 3058           STA A TYPE
 00829 2D5E 8D E7      RUN0   BSR LOAD0
 00830 2D60 8E A049           LDS #$A049
 00831 2D63 6E 00             JMP 0,X
 00832 2D65 86 22      SAVE   LDA A #$22
 00833 2D67 B7 3058           STA A TYPE
 00834 2D6A BD 2B06           JSR MAKNAM
 00835 2D6D CE 29B5    SAVE2  LDX #FIRADD
 00836 2D70 BD 2DD5           JSR GET4
 00837 2D73 FF 3059           STX STARTX
 00838 2D76 CE 29C3           LDX #LASADD
 00839 2D79 BD 2DD5           JSR GET4
 00840 2D7C FF 305B           STX ENDX
 00841 2D7F CE 29D1           LDX #PSTART
 00842 2D82 BD 2DD5           JSR GET4
 00843 2D85 FF 305D           STX GOX
 00844 2D88 B6 3067           LDA A NAME
 00845 2D8B 81 24             CMP A #'$
 00846 2D8D 26 1F             BNE SAVE3
 00847 2D8F 86 11             LDA A #$11
 00848 2D91 B7 3058           STA A TYPE
 00849 2D94 BD 284C           JSR KEYBD
 00850 2D97 B6 3004           LDA A BUFFER
 00851 2D9A 81 24             CMP A #'$
 00852 2D9C 26 07             BNE GOAWAY
 00853 2D9E B6 3005           LDA A BUFFER+1
 00854 2DA1 81 24             CMP A #'$
 00855 2DA3 27 09             BEQ SAVE3
 00856 2DA5 CE 2DB9    GOAWAY LDX #NOSIR
 00857 2DA8 BD 28A1           JSR OUTPUT
 00858 2DAB 7E 2A22           JMP DOSTRT
 00859 2DAE BD 2645    SAVE3  JSR WLIB
 00860 2DB1 DE 04             LDX BMEMH
 00861 2DB3 BD 2561           JSR WRITE0
 00862 2DB6 7E 2A22           JMP DOSTRT
 00863                                    
 00864 2DB9 53 59 53   NOSIR  FCC /SYSTEM FILE - ACCESS DENIED/
 00865 2DD4 04                FCB 4
 00866                                    
 00867 2DD5 FF 3061    GET4   STX TEMPX1
 00868 2DD8 FE 3061    GET40  LDX TEMPX1
 00869 2DDB BD 28A9           JSR OUTNCR
 00870 2DDE BD 284C           JSR KEYBD
 00871 2DE1 CE 3004           LDX #BUFFER
 00872 2DE4 BD 28CA           JSR SKIPSP
 00873 2DE7 8D 12             BSR BYTE
 00874 2DE9 25 ED             BCS GET40
 00875 2DEB B7 2DF9           STA A XHI
 00876 2DEE 8D 0B             BSR BYTE
 00877 2DF0 25 E6             BCS GET40
 00878 2DF2 B7 2DFA           STA A XLO
 00879 2DF5 FE 2DF9           LDX XHI
 00880 2DF8 39                RTS
 00881                                    
 00882 2DF9 0001       XHI    RMB 1
 00883 2DFA 0001       XLO    RMB 1
 00884                                    
 00885 2DFB 8D 0E      BYTE   BSR INHEX
 00886 2DFD 25 0B             BCS OUTBYT
 00887 2DFF 48                ASL A
 00888 2E00 48                ASL A
 00889 2E01 48                ASL A
 00890 2E02 48                ASL A
 00891 2E03 16                TAB
 00892 2E04 8D 05             BSR INHEX
 00893 2E06 25 02             BCS OUTBYT
 00894 2E08 1B                ABA
 00895 2E09 0C                CLC
 00896 2E0A 39         OUTBYT RTS
 00897 2E0B A6 00      INHEX  LDA A 0,X
 00898 2E0D 08                INX
 00899 2E0E 80 30             SUB A #$30
 00900 2E10 2B 10             BMI NOTHEX
 00901 2E12 81 09             CMP A #$09
 00902 2E14 2F 0A             BLE YESHEX
 00903 2E16 81 11             CMP A #$11
 00904 2E18 2B 08             BMI NOTHEX
 00905 2E1A 81 16             CMP A #$16
 00906 2E1C 2E 04             BGT NOTHEX
 00907 2E1E 80 07             SUB A #7
 00908 2E20 0C         YESHEX CLC
 00909 2E21 39                RTS
 00910 2E22 0D         NOTHEX SEC
 00911 2E23 39                RTS
 00912 2E24 C6 FF      FILES  LDA B #$FF
 00913 2E26 F7 3054           STA B CREFLG
 00914 2E29 20 03             BRA CATAL0
 00915 2E2B 7F 3054    CATAL  CLR CREFLG
 00916 2E2E BD 2A72    CATAL0 JSR SELECT
 00917 2E31 86 02             LDA A #2
 00918 2E33 97 00             STA A TRACK
 00919 2E35 4F                CLR A
 00920 2E36 97 01             STA A SECTOR
 00921 2E38 BD 2523           JSR PRELIM
 00922 2E3B 86 10             LDA A #$10
 00923 2E3D BD 2634           JSR OUTCH
 00924 2E40 86 16             LDA A #$16
 00925 2E42 BD 2634           JSR OUTCH
 00926 2E45 C6 03             LDA B #3
 00927 2E47 37                PSH B
 00928 2E48 CE 3176    CATAL1 LDX #DBUFFR+255
 00929 2E4B DF 06             STX EMEMH
 00930 2E4D CE 3077           LDX #DBUFFR
 00931 2E50 BD 242E           JSR READ0
 00932 2E53 CE 3077           LDX #DBUFFR
 00933 2E56 A6 00      CATAL2 LDA A 0,X
 00934 2E58 81 FF             CMP A #$FF
 00935 2E5A 27 4D             BEQ CATEX
 00936 2E5C C6 08             LDA B #8
 00937 2E5E A6 00      CATAL3 LDA A 0,X
 00938 2E60 BD 2634           JSR OUTCH
 00939 2E63 08                INX
 00940 2E64 5A                DEC B
 00941 2E65 26 F7             BNE CATAL3
 00942 2E67 C6 08             LDA B #8
 00943 2E69 08         CATAL4 INX
 00944 2E6A 5A                DEC B
 00945 2E6B 26 FC             BNE CATAL4
 00946 2E6D 86 20             LDA A #$20
 00947 2E6F BD 2634           JSR OUTCH
 00948 2E72 7D 3054           TST CREFLG
 00949 2E75 27 16             BEQ CATA45
 00950 2E77 8D 74             BSR OUT2HS
 00951 2E79 8D 72             BSR OUT2HS
 00952 2E7B 08                INX
 00953 2E7C 8D 6F             BSR OUT2HS
 00954 2E7E 8D 6D             BSR OUT2HS
 00955 2E80 8D 69             BSR OUT4HS
 00956 2E82 8D 67             BSR OUT4HS
 00957 2E84 8D 65             BSR OUT4HS
 00958 2E86 BD 28B0           JSR CRLF
 00959 2E89 C6 05             LDA B #5
 00960 2E8B 20 10             BRA CATAL6
 00961 2E8D 33         CATA45 PUL B
 00962 2E8E 5A                DEC B
 00963 2E8F 26 05             BNE CATA46
 00964 2E91 BD 28B0           JSR CRLF
 00965 2E94 C6 03             LDA B #3
 00966 2E96 37         CATA46 PSH B
 00967 2E97 C6 10             LDA B #16
 00968 2E99 20 02             BRA CATAL6
 00969 2E9B C6 20      CATAL5 LDA B #32
 00970 2E9D 08         CATAL6 INX
 00971 2E9E 5A                DEC B
 00972 2E9F 26 FC             BNE CATAL6
 00973 2EA1 09                DEX
 00974 2EA2 9C 06             CPX EMEMH
 00975 2EA4 27 A2             BEQ CATAL1
 00976 2EA6 08                INX
 00977 2EA7 20 AD             BRA CATAL2
 00978 2EA9 FF 3061    CATEX  STX TEMPX1
 00979 2EAC 33                PUL B
 00980 2EAD BD 28B0           JSR CRLF
 00981 2EB0 CE 2EC8           LDX #REMMSG
 00982 2EB3 BD 28A9           JSR OUTNCR
 00983 2EB6 FE 3061           LDX TEMPX1
 00984 2EB9 C6 12             LDA B #18
 00985 2EBB 08         CATEX1 INX
 00986 2EBC 5A                DEC B
 00987 2EBD 26 FC             BNE CATEX1
 00988 2EBF BD 2EEB           JSR OUT4HS
 00989 2EC2 BD 28B0           JSR CRLF
 00990 2EC5 7E 2A22           JMP DOSTRT
 00991                                    
 00992 2EC8 53 45 43   REMMSG FCC /SECTORS REMAINING (HEX)  /
 00993 2EE1 04                FCB 4
 00994                                    
 00995 2EE2 A6 00      OUT2H  LDA A 0,X
 00996 2EE4 8D 0E      OUT2HA BSR OUTHL
 00997 2EE6 A6 00             LDA A 0,X
 00998 2EE8 08                INX
 00999 2EE9 20 0D             BRA OUTHR
 01000 2EEB 8D F5      OUT4HS BSR OUT2H
 01001 2EED 8D F3      OUT2HS BSR OUT2H
 01002 2EEF 86 20      OUTS   LDA A #$20
 01003 2EF1 7E 2634           JMP OUTCH
 01004 2EF4 44         OUTHL  LSR A
 01005 2EF5 44                LSR A
 01006 2EF6 44                LSR A
 01007 2EF7 44                LSR A
 01008 2EF8 84 0F      OUTHR  AND A #$F
 01009 2EFA 8B 30             ADD A #$30
 01010 2EFC 81 39             CMP A #$39
 01011 2EFE 23 02             BLS OUTHHH
 01012 2F00 8B 07             ADD A #$7
 01013 2F02 7E 2634    OUTHHH JMP OUTCH
 01014 2F05 BD 2A72    TEST   JSR SELECT
 01015 2F08 BD 2523           JSR PRELIM
 01016 2F0B CE 2F30           LDX #TEST2
 01017 2F0E DF 0B             STX PROGX
 01018 2F10 86 00             LDA A #0
 01019 2F12 97 00             STA A TRACK
 01020 2F14 97 01             STA A SECTOR
 01021 2F16 CE 19FF           LDX #$19FF
 01022 2F19 DF 06             STX EMEMH
 01023 2F1B CE 1000    TEST1  LDX #$1000
 01024 2F1E BD 242E           JSR READ0
 01025 2F21 96 00             LDA A TRACK
 01026 2F23 81 23             CMP A #35
 01027 2F25 26 F4             BNE TEST1
 01028 2F27 CE 2A18           LDX #TSTDON
 01029 2F2A BD 28A1           JSR OUTPUT
 01030 2F2D 7E 2A22           JMP DOSTRT
 01031 2F30 96 01      TEST2  LDA A SECTOR
 01032 2F32 4C                INC A
 01033 2F33 81 0A             CMP A #10
 01034 2F35 26 04             BNE TEST3
 01035 2F37 4F                CLR A
 01036 2F38 7C 0000           INC TRACK
 01037 2F3B 97 01      TEST3  STA A SECTOR
 01038 2F3D 20 DC             BRA TEST1
 01039 2F3F                   END
